
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æµè§ˆå™¨å·¥ä½œåŸç† â€” ä¹‹ HTTP è¯·æ±‚ä¸è§£æ - ä¸‰Â·é’» TriDiamond</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="
å‰æ²¿æµè§ˆå™¨å·¥ä½œåŸç†æ˜¯ä¸€å—éå¸¸é‡è¦çš„å†…å®¹ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ é‡ç»˜ ã€é‡æ’ æˆ–è€…ä¸€äº›è®²è§£ CSS å±æ€§çš„æ—¶å€™ï¼Œéƒ½ä¼šç”¨åˆ°ä¸€äº›æµè§ˆå™¨å·¥ä½œåŸç†çš„çŸ¥è¯†æ¥è®²è§£ã€‚ç†è®ºåŒ–å­¦ä¹ æµè§ˆå™¨å·¥ä½œåŸç†ï¼Œæ•ˆæœä¸æ˜¯å¾ˆå¤§ï¼Œè€Œä¸”å¾ˆæ¯ç‡¥ï¼Œ,"> 
    <meta name="author" content="ä¸‰Â·é’» TriDiamond"> 
    <link rel="alternative" href="atom.xml" title="ä¸‰Â·é’» TriDiamond" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

<meta name="generator" content="Hexo 4.2.1"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">ä¸‰Â·é’» TriDiamond</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://tridiamond.me">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">æµè§ˆå™¨å·¥ä½œåŸç† â€” ä¹‹ HTTP è¯·æ±‚ä¸è§£æ</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(https://img-blog.csdnimg.cn/20200815152729473.png) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/FrontEnd"><b>ã€Œ
                    </b>FRONTEND<b> ã€</b></a>
                
                å…«æœˆ 15, 2020
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2020/08/15/frontend/browser-working-logic-1.html" title="æµè§ˆå™¨å·¥ä½œåŸç† â€” ä¹‹ HTTP è¯·æ±‚ä¸è§£æ" class="">æµè§ˆå™¨å·¥ä½œåŸç† â€” ä¹‹ HTTP è¯·æ±‚ä¸è§£æ</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>æ–‡ç« å­—æ•°</i>
                    27k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>é˜…è¯»çº¦éœ€</i>
                    25 mins.
                </span>
                
                
                
                <span id="busuanzi_container_page_pv">
                    <b class="iconfont icon-read"></b> <i>é˜…è¯»æ¬¡æ•°</i>
                    <span id="busuanzi_value_page_pv">0</span>
                </span>
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Browser/" rel="tag">Browser</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <p><img src="https://img-blog.csdnimg.cn/20200815152729473.png" alt=""></p>
<h1 id="å‰æ²¿"><a href="#å‰æ²¿" class="headerlink" title="å‰æ²¿"></a>å‰æ²¿</h1><p>æµè§ˆå™¨å·¥ä½œåŸç†æ˜¯ä¸€å—éå¸¸é‡è¦çš„å†…å®¹ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ <code>é‡ç»˜</code> ã€<code>é‡æ’</code> æˆ–è€…ä¸€äº›è®²è§£ CSS å±æ€§çš„æ—¶å€™ï¼Œéƒ½ä¼šç”¨åˆ°ä¸€äº›æµè§ˆå™¨å·¥ä½œåŸç†çš„çŸ¥è¯†æ¥è®²è§£ã€‚ç†è®ºåŒ–å­¦ä¹ æµè§ˆå™¨å·¥ä½œåŸç†ï¼Œæ•ˆæœä¸æ˜¯å¾ˆå¤§ï¼Œè€Œä¸”å¾ˆæ¯ç‡¥ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä»é›¶å¼€å§‹ç”¨ <code>JavaScript</code> æ¥å®ç°ä¸€ä¸ªæµè§ˆå™¨ã€‚</p>
<p>é€šè¿‡è‡ªå·±å®ç°ä¸€éç®€å•çš„æµè§ˆå™¨ï¼Œæˆ‘ä»¬ä¼šå¯¹æµè§ˆå™¨çš„åŸºæœ¬åŸç†æœ‰æ›´ä¸ºæ·±åˆ»çš„ç†è§£ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹"><a href="#æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹" class="headerlink" title="æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹"></a>æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹</h1><p><img src="https://img-blog.csdnimg.cn/20200807200842150.png" alt=""></p>
<ul>
<li>é¦–å…ˆæµè§ˆå™¨æ˜¯ç”± 5 ä¸ªæ­¥éª¤å®Œæˆçš„æ•´ä½“æ¸²æŸ“</li>
<li>æˆ‘ä»¬ä» URL è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œç»è¿‡æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“åæˆä¸ºäº† Bitmap</li>
<li>æœ€åé€šè¿‡æˆ‘ä»¬çš„æ˜¾å¡é©±åŠ¨è®¾é…å‡ºå»ç”»é¢ï¼Œè®©æˆ‘ä»¬çœ‹åˆ°å®Œæˆçš„é¡µé¢</li>
<li>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹</li>
<li>è¿™é‡Œæˆ‘ä»¬åªå®ç°ä¸€ä¸ªç®€å•çš„åŸºç¡€æµç¨‹ï¼Œä½†æ˜¯çœŸæ­£çš„æµè§ˆå™¨è¿˜åŒ…å«äº†å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚å†å²ç­‰ç­‰</li>
</ul>
<blockquote>
<p>æˆ‘ä»¬ä¸»è¦éœ€è¦å®Œæˆçš„æ˜¯ä» URL è¯·æ±‚åˆ° Bitmap é¡µé¢å±•ç¤ºçš„æ•´ä¸ªæµç¨‹å°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<p>æµè§ˆå™¨æµç¨‹ï¼š</p>
<ol>
<li><code>URL</code> éƒ¨åˆ†ï¼Œç»è¿‡ <code>HTTP</code> è¯·æ±‚ï¼Œç„¶åè§£æè¿”å›å†…å®¹ï¼Œç„¶åæå– <code>HTML</code> å†…å®¹</li>
<li>å¾—åˆ° <code>HTML</code> åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–‡æœ¬åˆ†æï¼ˆparseï¼‰ï¼Œç„¶åæŠŠ HTML çš„æ–‡æœ¬ç¼–ç¨‹ä¸€ä¸ª <code>DOM</code> æ ‘</li>
<li>è¿™ä¸ªæ—¶å€™çš„ <code>DOM</code> æ ‘æ˜¯å…‰ç§ƒç§ƒçš„ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬è¿›è¡Œ CSS è®¡ç®—ï¼ˆCSS computingï¼‰ï¼Œæœ€ç»ˆæŠŠ CSS æŒ‚è½½åœ¨è¿™ä¸ª DOM æ ‘ä¸Š</li>
<li>ç»è¿‡è®¡ç®—åï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰ä¸€ä¸ªæœ‰æ ·å¼çš„ DOM æ ‘ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¸ƒå±€ï¼ˆæˆ–è€…æ’ç‰ˆï¼‰äº†</li>
<li>é€šè¿‡å¸ƒå±€è®¡ç®—ï¼Œæ¯ä¸€ä¸ª DOM éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªè®¡ç®—åçš„ç›’ï¼ˆå½“ç„¶å®é™…æµè§ˆå™¨ä¸­æ˜¯æ¯ä¸ª CSS éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç›’ï¼Œä½†æ˜¯ä¸ºäº†ç®€åŒ–è¿™ä¸ªï¼Œæˆ‘ä»¬è¿™é‡Œåªåšåˆ°æ¯ä¸ª DOM åªç”Ÿæˆä¸€ä¸ªç›’å³å¯ï¼‰</li>
<li>æœ€åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ¸²æŸ“ï¼ˆRenderï¼‰ï¼ŒæŠŠè¿™ä¸ª DOM æ ‘è¯¥æœ‰èƒŒæ™¯å›¾çš„æœ‰èƒŒæ™¯å›¾ï¼Œè¯¥æœ‰èƒŒæ™¯è‰²çš„æœ‰èƒŒæ™¯è‰²ï¼Œæœ€åæŠŠè¿™äº›æ ·å¼ç”»åˆ°ä¸€å¼ å›¾ç‰‡ä¸Šã€‚ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶é©±åŠ¨æä¾›çš„ API æ¥å£ï¼Œå±•ç¤ºå‡ºæ¥ç»™ç”¨æˆ·çœ‹äº†ã€‚</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²"><a href="#æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²" class="headerlink" title="æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²"></a>æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²</h1><p>å› ä¸ºè¿™ä¸ªå¤„ç†å­—ç¬¦ä¸²æ˜¯æ•´ä¸ªçš„æµè§ˆå™¨é‡Œé¢è´¯ç©¿ä½¿ç”¨çš„æŠ€å·§ï¼Œå¦‚æœä¸ä¼šç”¨è¿™ä¸ªçŠ¶æ€æœºï¼Œåé¢å®ç°å’Œè¯»æµè§ˆå™¨å®ç°çš„ä»£ç ä¼šéå¸¸åƒåŠ›ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å…ˆè®²è®²ä»€ä¹ˆæ˜¯æœ‰é™çŠ¶æ€æœºã€‚</p>
<ul>
<li><strong>æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªæœºå™¨</strong><ul>
<li>æ¯ä¸ªæœºå™¨éƒ½æ˜¯äº’ç›¸è§£è€¦ï¼Œå¼ºæœ‰åŠ›çš„æŠ½è±¡æœºåˆ¶</li>
<li>åœ¨æ¯ä¸€ä¸ªæœºå™¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšè®¡ç®—ã€å­˜å‚¨ã€è¾“å‡ºç­‰</li>
<li>æ‰€æœ‰çš„è¿™äº›æœºå™¨æ¥å—çš„è¾“å…¥æ˜¯ä¸€è‡´çš„</li>
<li>çŠ¶æ€æœºçš„æ¯ä¸€ä¸ªæœºå™¨æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å‡½æ•°æ¥è¡¨è¾¾çš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰</li>
<li>æ— å‰¯ä½œç”¨æŒ‡çš„æ˜¯ï¼šä¸åº”è¯¥å†å—å¤–éƒ¨çš„è¾“å…¥æ§åˆ¶ï¼Œè¾“å…¥æ˜¯å¯ä»¥çš„</li>
</ul>
</li>
<li><strong>æ¯ä¸€ä¸ªæœºå™¨çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€</strong><ul>
<li>æ¯ä¸€ä¸ªæœºå™¨éƒ½æœ‰ç¡®å®šçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMooreï¼‰</li>
<li>æ¯ä¸€ä¸ªæœºå™¨æ ¹æ®è¾“å…¥å†³å®šä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆMealyï¼‰</li>
</ul>
</li>
</ul>
<h2 id="JavaScript-ä¸­å¦‚ä½•å®ç°"><a href="#JavaScript-ä¸­å¦‚ä½•å®ç°" class="headerlink" title="JavaScript ä¸­å¦‚ä½•å®ç°"></a>JavaScript ä¸­å¦‚ä½•å®ç°</h2><p>Mealy çŠ¶æ€æœºï¼š</p>
<pre><code class="js">// æ¯ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€
function state(input) {
  // å‡½æ•°å‚æ•°å°±æ˜¯è¾“å…¥
  // åœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è‡ªç”±åœ°ç¼–å†™ä»£ç ï¼Œå¤„ç†æ¯ä¸ªçŠ¶æ€çš„é€»è¾‘
  return next; // è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€
}

/** ========= ä»¥ä¸‹æ˜¯è°ƒè¯• ========= */
while (input) {
  // è·å–è¾“å…¥
  state = state(input); // æŠŠçŠ¶æ€æœºçš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€
}</code></pre>
<ul>
<li>ä»¥ä¸Šä»£ç æˆ‘ä»¬çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€</li>
<li>ç„¶åå‡½æ•°çš„å‚æ•°æ˜¯è¾“å…¥ <code>input</code></li>
<li>è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸‹ä¸€ä¸ªè¿”å›å€¼ä¸€å®šå¾—æ˜¯ä¸€ä¸ªçŠ¶æ€å‡½æ•°</li>
<li>çŠ¶æ€æœºç†æƒ³çš„å®ç°æ–¹å¼ï¼šä¸€ç³»åˆ—è¿”å›çŠ¶æ€å‡½æ•°çš„ä¸€æ‰¹çŠ¶æ€å‡½æ•°</li>
<li>è°ƒç”¨çŠ¶æ€å‡½æ•°çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šç”¨ä¸€ä¸ªå¾ªç¯æ¥è·å–è¾“å…¥ï¼Œç„¶åé€šè¿‡ <code>state = state(input)</code>ï¼Œæ¥è®©çŠ¶æ€æœºæ¥æ”¶è¾“å…¥æ¥å®ŒæˆçŠ¶æ€åˆ‡æ¢</li>
<li><code>Mealy</code> å‹çŠ¶æ€æœºï¼Œè¿”å›å€¼ä¸€å®šæ˜¯æ ¹æ® <code>input</code> è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€</li>
<li><code>Moore</code> å‹çŠ¶æ€æœºï¼Œè¿”å›å€¼æ˜¯ä¸ <code>input</code> æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œéƒ½æ˜¯å›ºå®šçš„çŠ¶æ€è¿”å›</li>
</ul>
<h2 id="ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²"><a href="#ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²" class="headerlink" title="ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²"></a>ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²</h2><p>æˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹ï¼Œåœ¨ä¸ä½¿ç”¨çŠ¶æ€æœºçš„æƒ…å†µä¸‹æ¥å®ç°ä¸€äº›å­—ç¬¦ä¸²çš„å¤„ç†æ–¹å¼ï¼š</p>
<p><strong>ç¬¬ä¸€é—®é¢˜ï¼šåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦â€œaâ€</strong></p>
<pre><code class="javascript">function match(string) {
  for (let letter of string) {
    if (letter == &#39;a&#39;) return true;
  }
  return false;
}

console.log(match(&#39;I am TriDiamond&#39;));</code></pre>
<p><strong>ç¬¬äºŒä¸ªé—®é¢˜ï¼šä¸å‡†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œçº¯ç²¹ç”¨ JavaScript çš„é€»è¾‘å®ç°ï¼šåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦â€œabâ€</strong></p>
<p>ã€Œç›´æ¥å¯»æ‰¾ <code>a</code> å’Œ <code>b</code>ï¼Œéƒ½æ‰¾åˆ°æ—¶è¿”å›ã€</p>
<pre><code class="javascript">/**
 * ç›´æ¥å¯»æ‰¾ `a` å’Œ `b`ï¼Œéƒ½æ‰¾åˆ°æ—¶è¿”å›
 * @param {*} string è¢«åŒ¹é…çš„å­—ç¬¦
 */
function matchAB(string) {
  let hasA = false;
  for (let letter of string) {
    if (letter == &#39;a&#39;) {
      hasA = true;
    } else if (hasA &amp;&amp; letter == &#39;b&#39;) {
      return true;
    } else {
      hasA = false;
    }
  }
  return false;
}

console.log(matchAB(&#39;hello abert&#39;));</code></pre>
<p><strong>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šä¸å‡†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œçº¯ç²¹ç”¨ JavaScript çš„é€»è¾‘å®ç°ï¼šåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦â€œabcdefâ€</strong></p>
<p>æ–¹æ³•ä¸€ï¼šã€Œä½¿ç”¨æš‚å­˜ç©ºé—´ï¼Œç§»åŠ¨æŒ‡é’ˆæ¥æ£€æµ‹ã€</p>
<pre><code class="javascript">/**
 * ä½¿ç”¨æš‚å­˜ç©ºé—´ï¼Œç§»åŠ¨æŒ‡é’ˆæ¥æ£€æµ‹
 * @param {*} match éœ€è¦åŒ¹é…çš„å­—ç¬¦
 * @param {*} string è¢«åŒ¹é…çš„å­—ç¬¦
 */
function matchString(match, string) {
  const resultLetters = match.split(&#39;&#39;); // éœ€è¦åŒ¹é…çš„å­—ç¬¦æ‹†è§£æˆæ•°ç»„æ¥è®°å½•
  const stringArray = string.split(&#39;&#39;); // æŠŠè¢«åŒ¹é…çš„å­—ç¬¦ä¸²å†…å®¹ä¹Ÿæ‹†è§£æˆæ•°ç»„
  let index = 0; // åŒ¹é…å­—ç¬¦ä¸²çš„æŒ‡é’ˆ

  for (let i = 0; i &lt;= stringArray.length; i++) {
    // å› ä¸ºè¦ä¿è¯å­—ç¬¦çš„ç»å¯¹åŒ¹é…ï¼Œå¦‚ â€œabâ€ ä¸èƒ½æ˜¯ &quot;abc&quot;,ä¸èƒ½æ˜¯ &quot;a b&quot;
    // æ‰€ä»¥è¿™é‡Œéœ€è¦ä¸¤ä¸ªå­—ç¬¦å¿…é¡»æ˜¯æœ‰é¡ºåºçš„å…³ç³»çš„
    if (stringArray[i] == resultLetters[index]) {
      // å¦‚æœæ‰¾åˆ°ä¸€ä¸ªå­—ç¬¦æ˜¯å»åˆçš„ï¼Œå°± index + 1 æ‰¾ä¸‹ä¸€ä¸ªå­—ç¬¦
      index++;
    } else {
      // å¦‚æœä¸‹ä¸€ä¸ªå­—ç¬¦ä¸å»åˆï¼Œå°±é‡ç½®é‡æ–°åŒ¹é…
      index = 0;
    }
    // å¦‚æœå·²ç»åŒ¹é…å®Œæ‰€æœ‰çš„å­—ç¬¦äº†ï¼Œç›´æ¥å¯ä»¥è¿”å› true
    // è¯æ˜å­—ç¬¦ä¸­å«æœ‰éœ€è¦å¯»æ‰¾çš„å­—ç¬¦
    if (index &gt; resultLetters.length - 1) return true;
  }
  return false;
}

console.log(&#39;æ–¹æ³•1&#39;, matchString(&#39;abcdef&#39;, &#39;hello abert abcdef&#39;));</code></pre>
<p>æ–¹æ³•äºŒï¼šã€Œä½¿ç”¨ <code>substring</code>å’ŒåŒ¹é…å­—ç¬¦çš„é•¿åº¦æ¥æˆªå–å­—ç¬¦ï¼Œçœ‹æ˜¯å¦ç­‰äºç­”æ¡ˆã€</p>
<pre><code class="javascript">/**
 * é€šç”¨å­—ç¬¦ä¸²åŒ¹é… - å‚è€ƒæ–¹æ³•2ï¼ˆä½¿ç”¨substringï¼‰
 * @param {*} match éœ€è¦åŒ¹é…çš„å­—ç¬¦
 * @param {*} string è¢«åŒ¹é…çš„å­—ç¬¦
 */
function matchWithSubstring(match, string) {
  for (let i = 0; i &lt; string.length - 1; i++) {
    if (string.substring(i, i + match.length) === match) {
      return true;
    }
  }
  return false;
}

console.log(&#39;æ–¹æ³•2&#39;, matchWithSubstring(&#39;abcdef&#39;, &#39;hello abert abcdef&#39;));</code></pre>
<p>æ–¹æ³•ä¸‰ï¼šã€Œé€ä¸ªæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç»ˆç»“æœã€</p>
<pre><code class="javascript">/**
 * é€ä¸ªæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç»ˆç»“æœ
 * @param {*} string è¢«åŒ¹é…çš„å­—ç¬¦
 */
function match(string) {
  let matchStatus = [false, false, false, false, false, false];
  let matchLetters = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;];
  let statusIndex = 0;

  for (let letter of string) {
    if (letter == matchLetters[0]) {
      matchStatus[0] = true;
      statusIndex++;
    } else if (matchStatus[statusIndex - 1] &amp;&amp; letter == matchLetters[statusIndex]) {
      matchStatus[statusIndex] = true;
      statusIndex++;
    } else {
      matchStatus = [false, false, false, false, false, false];
      statusIndex = 0;
    }

    if (statusIndex &gt; matchLetters.length - 1) return true;
  }
  return false;
}

console.log(&#39;æ–¹æ³•3&#39;, match(&#39;hello abert abcdef&#39;));</code></pre>
<h2 id="ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦"><a href="#ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦" class="headerlink" title="ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦"></a>ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦</h2><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çŠ¶æ€æœºçš„æ–¹å¼æ¥å®ç°ï¼š<strong>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å­—ç¬¦â€œabcdefâ€</strong></p>
<ul>
<li>é¦–å…ˆæ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯çŠ¶æ€å‡½æ•°</li>
<li>æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªå¼€å§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€å‡½æ•°ï¼Œåˆ†åˆ«é—®é¢˜ <code>start</code> å’Œ <code>end</code></li>
<li>çŠ¶æ€å‡½æ•°åå­—éƒ½ä»£è¡¨å½“å‰çŠ¶æ€çš„æƒ…å†µ <code>matchedA</code> å°±æ˜¯å·²ç»åŒ¹é…ä¸­ <code>a</code> å­—ç¬¦äº†ï¼Œä»¥æ­¤ç±»æ¨</li>
<li>æ¯ä¸€ä¸ªçŠ¶æ€ä¸­çš„é€»è¾‘å°±æ˜¯åŒ¹é…ä¸‹ä¸€ä¸ªå­—ç¬¦</li>
<li>å¦‚æœåŒ¹é…æˆåŠŸè¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€å‡½æ•°</li>
<li>å¦‚æœåŒ¹é…å¤±è´¥è¿”å›å¼€å§‹çŠ¶æ€ <code>start</code></li>
<li>å› ä¸ºå­—ç¬¦ä¸­æœ€åä¸€ä¸ªæ˜¯ <code>f</code> å­—ç¬¦ï¼Œæ‰€ä»¥ <code>matchedE</code> æˆåŠŸåï¼Œå¯ä»¥ç›´æ¥è¿”å› ç»“æŸçŠ¶æ€<code>end</code></li>
<li><code>end</code> è¿™ä¸ªç»“æŸçŠ¶æ€ï¼Œä¹Ÿè¢«ç§°ä¸ºé™·é˜±æ–¹æ³• (Trap)ï¼Œå› ä¸ºçŠ¶æ€è½¬å˜ç»“æŸäº†ï¼Œæ‰€ä»¥è®©çŠ¶æ€ä¸€ç›´åœç•™åœ¨è¿™é‡Œï¼ŒçŸ¥é“å¾ªç¯ç»“æŸ</li>
</ul>
<pre><code class="javascript">/**
 * çŠ¶æ€æœºå­—ç¬¦ä¸²åŒ¹é…
 * @param {*} string
 */
function match(string) {
  let state = start;

  for (let letter of string) {
    state = state(letter); // çŠ¶æ€åˆ‡æ¢
  }

  return state === end; // å¦‚æœæœ€åçš„çŠ¶æ€å‡½æ•°æ˜¯ `end` å³è¿”å› true
}

function start(letter) {
  if (letter === &#39;a&#39;) return matchedA;
  return start;
}

function end(letter) {
  return end;
}

function matchedA(letter) {
  if (letter === &#39;b&#39;) return matchedB;
  return start(letter);
}

function matchedB(letter) {
  if (letter === &#39;c&#39;) return matchedC;
  return start(letter);
}

function matchedC(letter) {
  if (letter === &#39;d&#39;) return matchedD;
  return start(letter);
}

function matchedD(letter) {
  if (letter === &#39;e&#39;) return matchedE;
  return start(letter);
}

function matchedE(letter) {
  if (letter === &#39;f&#39;) return end(letter);
  return start(letter);
}

console.log(match(&#39;I am abcdef&#39;));</code></pre>
<p><strong>é—®é¢˜å‡çº§ï¼šç”¨çŠ¶æ€æœºå®ç°å­—ç¬¦ä¸²â€œabcabxâ€çš„è§£æ</strong></p>
<ul>
<li>è¿™ä¸ªé—®é¢˜ä¸ä¸Šé¢çš„åŒºåˆ«åœ¨äºâ€abâ€æœ‰é‡å¤</li>
<li>æ‰€ä»¥æˆ‘ä»¬åˆ†æçš„é€»è¾‘åº”è¯¥æ˜¯ï¼š<ul>
<li>ç¬¬ä¸€æ¬¡ â€œbâ€ åé¢æ˜¯ â€œcâ€ï¼Œè€Œç¬¬äºŒæ¬¡ â€œbâ€ åé¢å°±åº”è¯¥æ˜¯ â€œxâ€</li>
<li>å¦‚æœç¬¬äºŒæ¬¡çš„åé¢ä¸æ˜¯ â€œxâ€ çš„è¯å°±å›åˆ°ä¸Šä¸€ä¸ªåˆ¤æ–­çŠ¶æ€å‡½æ•°</li>
</ul>
</li>
</ul>
<pre><code class="javascript">/**
 * çŠ¶æ€æœºåŒ¹é…å­—ç¬¦ä¸²
 * @param {*} string è¢«åŒ¹é…çš„å­—ç¬¦
 */
function match(string) {
  let state = start;

  for (let letter of string) {
    state = state(letter);
  }

  return state === end;
}

function start(letter) {
  if (letter === &#39;a&#39;) return matchedA;
  return start;
}

function end(letter) {
  return end;
}

function matchedA(letter) {
  if (letter === &#39;b&#39;) return matchedB;
  return start(letter);
}

function matchedB(letter) {
  if (letter === &#39;c&#39;) return matchedC;
  return start(letter);
}

function matchedC(letter) {
  if (letter === &#39;a&#39;) return matchedA2;
  return start(letter);
}

function matchedA2(letter) {
  if (letter === &#39;b&#39;) return matchedB2;
  return start(letter);
}

function matchedB2(letter) {
  if (letter === &#39;x&#39;) return end;
  return matchedB(letter);
}

console.log(&#39;result: &#39;, match(&#39;abcabcabx&#39;));</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="HTTP-åè®®è§£æåŸºç¡€çŸ¥è¯†"><a href="#HTTP-åè®®è§£æåŸºç¡€çŸ¥è¯†" class="headerlink" title="HTTP åè®®è§£æåŸºç¡€çŸ¥è¯†"></a>HTTP åè®®è§£æåŸºç¡€çŸ¥è¯†</h1><h2 id="ISO-OSI-ä¸ƒå±‚ç½‘ç»œæ¨¡å‹"><a href="#ISO-OSI-ä¸ƒå±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="ISO-OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹"></a>ISO-OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹</h2><p><strong>HTTP</strong></p>
<ul>
<li>ç»„æˆï¼š<ul>
<li>åº”ç”¨</li>
<li>è¡¨ç¤º</li>
<li>ä¼šè¯</li>
</ul>
</li>
<li>å¯¹åº” node çš„ä»£ç é‡Œï¼Œæˆ‘ä»¬æœ‰ç†Ÿæ‚‰çš„ <code>require(&#39;http&#39;)</code></li>
</ul>
<p><strong>TCP</strong></p>
<ul>
<li>ç»„æˆï¼š<ul>
<li>ä¼ è¾“</li>
</ul>
</li>
<li>å› ä¸ºç½‘é¡µæ˜¯éœ€è¦å¯é ä¼ è¾“ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå…³å¿ƒ TCP</li>
</ul>
<p><strong>Internet</strong></p>
<ul>
<li>ç»„æˆï¼š<ul>
<li>ç½‘ç»œ</li>
</ul>
</li>
<li>æœ‰æ—¶å€™è®²ä¸Šç½‘æœ‰ä¸¤å±‚æ„æ€<ul>
<li>ç½‘é¡µæ‰€åœ¨çš„åº”ç”¨å±‚çš„åè®®ï¼ˆå¤–ç½‘ï¼‰â€”â€” è´Ÿè´£æ•°æ®ä¼ è¾“çš„æ˜¯ Internet</li>
<li>å…¬å¸å†…ç½‘ï¼Œå« Intranet</li>
</ul>
</li>
</ul>
<p><strong>4G/5G/Wi-Fi</strong></p>
<ul>
<li>ç»„æˆï¼š<ul>
<li>æ•°æ®é“¾è·¯</li>
<li>ç‰©ç†å±‚</li>
</ul>
</li>
<li>ä¸ºäº†å®Œæˆå¯¹æ•°æ®å‡†ç¡®çš„ä¼ è¾“</li>
<li>ä¼ è¾“éƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ä¼ è¾“</li>
<li>å¿…é¡»æœ‰ç›´æ¥çš„è¿æ¥æ‰èƒ½è¿›è¡Œä¼ è¾“</li>
</ul>
<h3 id="TCP-ä¸-IP-çš„åŸºç¡€çŸ¥è¯†"><a href="#TCP-ä¸-IP-çš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="TCP ä¸ IP çš„åŸºç¡€çŸ¥è¯†"></a>TCP ä¸ IP çš„åŸºç¡€çŸ¥è¯†</h3><ul>
<li>æµ<ul>
<li>TCP å±‚ä¸­ä¼ è¾“æ•°æ®çš„æ¦‚å¿µæ˜¯ â€œæµâ€</li>
<li>æµæ˜¯ä¸€ç§æ²¡æœ‰æ˜æ˜¾çš„åˆ†å‰²å•ä½</li>
<li>å®ƒåªä¿è¯å‰åçš„é¡ºåºæ˜¯æ­£ç¡®çš„</li>
</ul>
</li>
<li>ç«¯å£<ul>
<li>TCP åè®®æ˜¯è¢«è®¡ç®—æœºé‡Œé¢çš„è½¯ä»¶æ‰€ä½¿ç”¨çš„</li>
<li>æ¯ä¸€ä¸ªè½¯ä»¶éƒ½ä¼šå»ä»ç½‘å¡å»æ‹¿æ•°æ®</li>
<li>ç«¯å£å†³å®šå“ªä¸€ä¸ªæ•°æ®åˆ†é…ç»™å“ªä¸€ä¸ªè½¯ä»¶</li>
<li>å¯¹åº” node.js çš„è¯å°±æ˜¯åº”ç”¨ <code>require(&#39;net&#39;)</code></li>
</ul>
</li>
<li>åŒ…<ul>
<li>TCP çš„ä¼ è¾“æ¦‚å¿µå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ•°æ®åŒ…</li>
<li>æ¯ä¸€ä¸ªæ•°æ®åŒ…å¯å¤§å¯å°</li>
<li>è¿™ä¸ªå–å†³äºä½ æ•´ä¸ªçš„ç½‘ç»œä¸­é—´è®¾å¤‡çš„ä¼ è¾“èƒ½åŠ›</li>
</ul>
</li>
<li>IP åœ°å€<ul>
<li>IP æ ¹æ®åœ°å€å»æ‰¾åˆ°æ•°æ®åŒ…åº”è¯¥ä»å“ªé‡Œåˆ°å“ªé‡Œ</li>
<li>åœ¨ Internet ä¸Šçš„è¿æ¥å…³ç³»éå¸¸å¤æ‚ï¼Œä¸­é—´å°±ä¼šæœ‰ä¸€äº›å¤§å‹çš„è·¯ç”±èŠ‚ç‚¹</li>
<li>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ª IP åœ°å€æ—¶ï¼Œå°±ä¼šè¿æ¥ä¸Šæˆ‘ä»¬çš„å°åŒºåœ°å€ä¸Šï¼Œç„¶ååˆ°ç”µä¿¡çš„ä¸»å¹²</li>
<li>å¦‚æœæ˜¯è®¿é—®å¤–å›½çš„è¯ï¼Œå°±ä¼šå†ä¸Šåˆ°å›½é™…çš„ä¸»å¹²åœ°å€ä¸Š</li>
<li>è¿™ä¸ª IP åœ°å€æ˜¯å”¯ä¸€çš„æ ‡è¯†ï¼Œè¿å…¥ Internet ä¸Šçš„æ¯ä¸€ä¸ªè®¾å¤‡</li>
<li>æ‰€ä»¥ IP åŒ…ï¼Œå°±æ˜¯é€šè¿‡ IP åœ°å€æ‰¾åˆ°è‡ªå·±éœ€è¦è¢«ä¼ è¾“åˆ°å“ªé‡Œ</li>
</ul>
</li>
<li>libnet/libpcap<ul>
<li>IP åè®®éœ€è¦è°ƒç”¨åˆ° C++ çš„è¿™ä¸¤ä¸ªåº“</li>
<li>libnet è´Ÿè´£æ„é€  IP åŒ…å¹¶ä¸”å‘é€</li>
<li>labpcap è´Ÿè´£ä»ç½‘å¡æŠ“å–æ‰€æœ‰æµç»ç½‘å¡çš„ IP åŒ…</li>
<li>å¦‚æœæˆ‘ä»¬å»ç”¨äº¤æ¢æœºè€Œä¸æ˜¯è·¯ç”±å™¨å»ç»„ç½‘ï¼Œæˆ‘ä»¬ç”¨åº•å±‚çš„ labpcap åŒ…å°±èƒ½æŠ“åˆ°å¾ˆå¤šæœ¬æ¥ä¸å±äºå‘ç»™æˆ‘ä»¬çš„ IP åŒ…</li>
</ul>
</li>
</ul>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><ul>
<li>ç»„æˆ<ul>
<li>Request è¯·æ±‚</li>
<li>Response è¿”å›</li>
</ul>
</li>
<li>ç›¸å¯¹äº TCP è¿™ç§å…¨åŒå·¥é€šé“ï¼Œå°±æ˜¯å¯ä»¥å‘ä¹Ÿå¯ä»¥æ”¶ï¼Œæ²¡æœ‰ä¼˜å…ˆå…³ç³»</li>
<li>è€Œ HTTP ç‰¹åˆ«çš„æ˜¯å¿…é¡»å¾—å…ˆç”±å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ª request</li>
<li>ç„¶åæœåŠ¡ç«¯å›æ¥ä¸€ä¸ª response</li>
<li>æ‰€ä»¥æ¯ä¸€ä¸ª request å¿…å®šæœ‰ä¸€ä¸ªå¯¹åº”çš„ response</li>
<li>å¦‚æœ request æˆ–è€… response å¤šäº†éƒ½è¯´æ˜åè®®å‡ºé”™</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="HTTP-è¯·æ±‚-â€”â€”-æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡"><a href="#HTTP-è¯·æ±‚-â€”â€”-æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡" class="headerlink" title="HTTP è¯·æ±‚ â€”â€” æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡"></a>HTTP è¯·æ±‚ â€”â€” æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡</h1><p>åœ¨æˆ‘ä»¬ç¼–å†™è‡ªå·±çš„æµè§ˆå™¨ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå»ºç«‹ä¸€ä¸ª node.js æœåŠ¡ç«¯ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª <code>node.js</code> çš„æœåŠ¡ç«¯ï¼š</p>
<pre><code class="javascript">const http = require(&#39;http&#39;);

http
  .createServer((request, response) =&gt; {
    let body = [];
    request
      .on(&#39;error&#39;, err =&gt; {
        console.error(err);
      })
      .on(&#39;data&#39;, chunk =&gt; {
        body.push(chunk.toString());
      })
      .on(&#39;end&#39;, () =&gt; {
        body = Buffer.concat(body).toString();
        console.log(&#39;body&#39;, body);
        response.writeHead(200, { &#39;Content-Type&#39;: &#39;text/html&#39; });
        response.end(&#39; Hello World\n&#39;);
      });
  })
  .listen(8080);

console.log(&#39;server started&#39;);</code></pre>
<h2 id="äº†è§£-HTTP-Request-åè®®"><a href="#äº†è§£-HTTP-Request-åè®®" class="headerlink" title="äº†è§£ HTTP Request åè®®"></a>äº†è§£ HTTP Request åè®®</h2><p>åœ¨ç¼–å†™æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ HTTP åè®®ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ HTTP åè®®çš„ request éƒ¨åˆ†ï¼š</p>
<blockquote>
<p>POST / HTTP/1.1</p>
<p>Host: 127.0.0.1</p>
<p>Content-Type: application/x-www-form-urlencoded</p>
<p>field1=aaa&amp;code=x%3D1</p>
</blockquote>
<ul>
<li>HTTP åè®®æ˜¯ä¸€ä¸ªæ–‡æœ¬å‹çš„åè®®ï¼Œæ–‡æœ¬å‹çš„åè®®ä¸€èˆ¬æ¥è¯´ä¸äºŒè¿›åˆ¶çš„åè®®æ˜¯ç›¸å¯¹çš„ï¼Œä¹Ÿæ„å‘³ç€è¿™ä¸ªåè®®é‡Œé¢æ‰€æœ‰å†…å®¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚éƒ½æ˜¯å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>HTTP åè®®çš„ç¬¬ä¸€è¡Œå«åš <code>request line</code>ï¼ŒåŒ…å«äº†ä¸‰ä¸ªéƒ¨åˆ†ï¼š<ul>
<li>Methodï¼šä¾‹å¦‚ POSTï¼ŒGET ç­‰</li>
<li>Pathï¼šé»˜è®¤å°±æ˜¯ â€œ/â€</li>
<li>HTTP å’Œ HTTP ç‰ˆæœ¬ï¼šHTTP/1.1</li>
</ul>
</li>
<li>ç„¶åæ¥ä¸‹æ¥å°±æ˜¯ <code>Headers</code><ul>
<li>Header çš„è¡Œæ•°ä¸å›ºå®š</li>
<li>æ¯ä¸€è¡Œéƒ½æ˜¯ä»¥ä¸€ä¸ªå†’å·åˆ†å‰²äº† <code>key: value</code> æ ¼å¼</li>
<li>Headers æ˜¯ä»¥ç©ºè¡Œè¿›è¡Œç»“æŸ</li>
</ul>
</li>
<li>æœ€åçš„ä¸€éƒ¨åˆ†å°±æ˜¯ <code>body</code> éƒ¨åˆ†ï¼š<ul>
<li>è¿™ä¸ªéƒ¨åˆ†çš„å†…å®¹æ˜¯ä»¥ <code>Content-Type</code>æ¥å†³å®šçš„</li>
<li>Content-Type è§„å®šäº†ä»€ä¹ˆæ ¼å¼ï¼Œé‚£ä¹ˆ body å°±ç”¨ä»€ä¹ˆæ ¼å¼æ¥å†™</li>
</ul>
</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç¼–å†™ä»£ç äº†ï¼</p>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="å®ç°-HTTP-è¯·æ±‚"><a href="#å®ç°-HTTP-è¯·æ±‚" class="headerlink" title="å®ç° HTTP è¯·æ±‚"></a>å®ç° HTTP è¯·æ±‚</h1><ul>
<li>è®¾è®¡ä¸€ä¸ª HTTP è¯·æ±‚çš„ç±»</li>
<li>content type æ˜¯ä¸€ä¸ªå¿…è¦çš„å­—æ®µï¼Œè¦æœ‰é»˜è®¤å€¼</li>
<li>body æ˜¯ KV æ ¼å¼</li>
<li>ä¸åŒçš„ content-type å½±å“ body çš„æ ¼å¼</li>
</ul>
<h2 id="Request-ç±»"><a href="#Request-ç±»" class="headerlink" title="Request ç±»"></a>Request ç±»</h2><pre><code class="javascript">class Request {
  constructor(options) {
    // é¦–å…ˆåœ¨ constructor èµ‹äºˆéœ€è¦ä½¿ç”¨çš„é»˜è®¤å€¼
    this.method = options.method || &#39;GET&#39;;
    this.host = options.host;
    this.port = options.port || 80;
    this.path = options.path || &#39;/&#39;;
    this.body = options.body || {};
    this.headers = options.headers || {};

    if (!this.headers[&#39;Content-Type&#39;]) {
      this.headers[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;;
    }
    // æ ¹æ® Content-Type è½¬æ¢ body çš„æ ¼å¼
    if (this.headers[&#39;Content-Type&#39;] === &#39;application/json&#39;) {
      this.bodyText = JSON.stringify(this.body);
    } else if (this.headers[&#39;Content-Type&#39;] === &#39;application/x-www-form-urlencoded&#39;) {
      this.bodyText = Object.keys(this.body)
        .map(key =&gt; `${key}=${encodeURIComponent(this.body[key])}`)
        .join(&#39;&amp;&#39;);
    }
    // è‡ªåŠ¨è®¡ç®— body å†…å®¹é•¿åº¦ï¼Œå¦‚æœé•¿åº¦ä¸å¯¹ï¼Œå°±ä¼šæ˜¯ä¸€ä¸ªéæ³•è¯·æ±‚
    this.headers[&#39;Content-Length&#39;] = this.bodyText.length;
  }
  // å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼Œè¿”å› Promise å¯¹è±¡
  send() {
    return new Promise((resolve, reject) =&gt; {
      //......
    });
  }
}</code></pre>
<h2 id="è¯·æ±‚æ–¹æ³•"><a href="#è¯·æ±‚æ–¹æ³•" class="headerlink" title="è¯·æ±‚æ–¹æ³•"></a>è¯·æ±‚æ–¹æ³•</h2><pre><code class="javascript">/**
 * è¯·æ±‚æ–¹æ³•
 */
void (async function () {
  let request = new Request({
    method: &#39;POST&#39;,
    host: &#39;127.0.0.1&#39;,
    port: &#39;8080&#39;,
    path: &#39;/&#39;,
    headers: {
      [&#39;X-Foo2&#39;]: &#39;custom&#39;,
    },
    body: {
      name: &#39;tridiamond&#39;,
    },
  });

  let response = await request.end();

  console.log(response);
})();</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="Request-ç±»ä¸­çš„-send-å‡½æ•°ç¼–å†™"><a href="#Request-ç±»ä¸­çš„-send-å‡½æ•°ç¼–å†™" class="headerlink" title="Request ç±»ä¸­çš„ send å‡½æ•°ç¼–å†™"></a>Request ç±»ä¸­çš„ send å‡½æ•°ç¼–å†™</h1><ul>
<li>Send å‡½æ•°æ˜¯ä¸€ä¸ª Promise çš„å½¢å¼</li>
<li>æ‰€ä»¥åœ¨ send çš„è¿‡ç¨‹ä¸­ä¼šé€æ­¥æ”¶åˆ° response</li>
<li>æœ€åæŠŠ response æ„é€ å¥½ä¹‹åå†è®© Promise å¾—åˆ° resolve</li>
<li>å› ä¸ºè¿‡ç¨‹æ˜¯é€æ­¥æ”¶åˆ°ä¿¡æ¯çš„ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ª ResponseParse</li>
<li>è¿™æ · Parse å¯ä»¥é€šè¿‡é€æ­¥åœ°å»æ¥æ”¶ response çš„ä¿¡æ¯æ¥æ„é€  response å¯¹è±¡ä¸åŒçš„éƒ¨åˆ†</li>
</ul>
<pre><code class="javascript">// å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼Œè¿”å› Promise å¯¹è±¡
  send() {
    return new Promise((resolve, reject) =&gt; {
      const parser = new ResponseParser();
      resolve(&#39;&#39;);
    });
  }</code></pre>
<h2 id="è®¾è®¡-ResponseParser"><a href="#è®¾è®¡-ResponseParser" class="headerlink" title="è®¾è®¡ ResponseParser"></a>è®¾è®¡ ResponseParser</h2><ul>
<li>Receive å‡½æ•°æ¥æ”¶å­—ç¬¦ä¸²</li>
<li>ç„¶åç”¨çŠ¶æ€æœºå¯¹é€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†</li>
<li>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¾ªç¯æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶ååŠ å…¥ <code>recieveChar</code> å‡½æ•°æ¥å¯¹æ¯ä¸ªå­—ç¬¦è¿›è¡Œå¤„ç†</li>
</ul>
<pre><code class="javascript">class ResponseParser {
  constructor() {}
  receive(string) {
    for (let i = 0; i &lt; string.length; i++) {
      this.receiveChar(string.charAt(i));
    }
  }
  receiveChar(char) {}
}</code></pre>
<h2 id="äº†è§£-HTTP-Response-åè®®"><a href="#äº†è§£-HTTP-Response-åè®®" class="headerlink" title="äº†è§£ HTTP Response åè®®"></a>äº†è§£ HTTP Response åè®®</h2><p>åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­è§£æ HTTP Response ä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘å…ˆæ¥äº†è§£ä¸€ä¸‹ HTTP Response ä¸­çš„å†…å®¹ã€‚</p>
<blockquote>
<p>HTTP/1.1 200 OK</p>
<p>Content-Type: text/html</p>
<p>Date: Mon, 23 Dec 2019 06:46:19 GMT</p>
<p>Connection: keep-alive</p>
<p>Transfer-Encoding: chunked</p>
<p>26</p>
<html><body> Hello World <body></html>

<p>0</p>
</blockquote>
<ul>
<li>é¦–å…ˆç¬¬ä¸€è¡Œçš„ <code>status line</code> ä¸ request line ç›¸å<ul>
<li>ç¬¬ä¸€éƒ¨åˆ†æ˜¯ HTTP åè®®çš„ç‰ˆæœ¬ï¼šHTTP/1.1</li>
<li>ç¬¬äºŒéƒ¨åˆ†æ˜¯ HTTP çŠ¶æ€ç ï¼š200 (åœ¨å®ç°æˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œä¸ºäº†æ›´åŠ ç®€å•ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ 200 ä»¥å¤–çš„çŠ¶æ€ä¸ºå‡ºé”™)</li>
<li>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ HTTP çŠ¶æ€æ–‡æœ¬ï¼šOK</li>
</ul>
</li>
<li>éšåçš„éƒ¨åˆ†å°±æ˜¯ header éƒ¨åˆ†<ul>
<li>HTML çš„ request å’Œ response éƒ½æ˜¯åŒ…å« header çš„</li>
<li>å®ƒçš„æ ¼å¼è·Ÿ request æ˜¯å®Œå…¨ä¸€è‡´çš„</li>
<li>æœ€åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œç”¨æ¥åˆ†å‰² headers å’Œ body å†…å®¹çš„éƒ¨åˆ†çš„</li>
</ul>
</li>
<li>æœ€åè¿™é‡Œçš„å°±æ˜¯ body éƒ¨åˆ†äº†<ul>
<li>è¿™é‡Œ body çš„æ ¼å¼ä¹Ÿæ˜¯æ ¹æ® Content-Type æ¥å†³å®šçš„</li>
<li>è¿™é‡Œæœ‰ä¸€ç§æ¯”è¾ƒå…¸å‹çš„æ ¼å¼å«åš <code>chunked body</code> (æ˜¯ Node é»˜è®¤è¿”å›çš„ä¸€ç§æ ¼å¼)</li>
<li>Chunked body æ˜¯ç”±ä¸€ä¸ªåå…­è¿›åˆ¶çš„æ•°å­—å•ç‹¬å ä¸€è¡Œ</li>
<li>åé¢è·Ÿç€å†…å®¹éƒ¨åˆ†</li>
<li>æœ€åè·Ÿç€ä¸€ä¸ªåå…­è¿›åˆ¶çš„ 0ï¼Œ0 ä¹‹åå°±æ˜¯æ•´ä¸ª body çš„ç»“å°¾äº†</li>
<li>è¿™ä¸ªä¹Ÿæ˜¯ç”¨æ¥åˆ†å‰² body çš„å†…å®¹</li>
</ul>
</li>
</ul>
<h2 id="å®ç°å‘é€è¯·æ±‚"><a href="#å®ç°å‘é€è¯·æ±‚" class="headerlink" title="å®ç°å‘é€è¯·æ±‚"></a>å®ç°å‘é€è¯·æ±‚</h2><p>è¿™é‡Œæˆ‘ä»¬å¼€å§‹å®æˆ˜ï¼Œé€šè¿‡å®ç° send å‡½æ•°ä¸­çš„é€»è¾‘æ¥çœŸæ­£å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ã€‚</p>
<ul>
<li>è®¾è®¡æ”¯æŒå·²æœ‰çš„ connection æˆ–è€…è‡ªå·±æ–°å¢ connection</li>
<li>æ”¶åˆ°æ•°æ®ä¼ ç»™ parser</li>
<li>æ ¹æ® parser çš„çŠ¶æ€ resolve Promise</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šæ€è·¯ï¼Œæˆ‘ä»¬æ¥å®ç°ä»£ç ï¼š</p>
<pre><code class="javascript">// å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼Œè¿”å› Promise å¯¹è±¡
  send(connection) {
    return new Promise((resolve, reject) =&gt; {
      const parser = new ResponseParser();
      // å…ˆåˆ¤æ–­ connection æ˜¯å¦æœ‰ä¼ é€è¿‡æ¥
      // æ²¡æœ‰å°±æ ¹æ®ï¼ŒHost å’Œ port æ¥åˆ›å»ºä¸€ä¸ª TCP è¿æ¥
      // `toString` æ˜¯æŠŠè¯·æ±‚å‚æ•°æŒ‰ç…§ HTTP Request çš„æ ¼å¼ç»„è£…
      if (connection) {
        connection.write(this.toString());
      } else {
        connection = net.createConnection(
          {
            host: this.host,
            port: this.port,
          },
          () =&gt; {
            connection.write(this.toString());
          }
        );
      }
      // ç›‘å¬ connection çš„ data
      // ç„¶ååŸå°ä¸åŠ¨ä¼ ç»™ parser
      // å¦‚æœ parser å·²ç»ç»“æŸçš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ resolve
      // æœ€åæ–­å¼€è¿æ¥
      connection.on(&#39;data&#39;, data =&gt; {
        console.log(data.toString());
        parser.receive(data.toString());

        if (parser.isFinished) {
          resolve(parser.response);
          connection.end();
        }
      });
      // ç›‘å¬ connection çš„ error
      // å¦‚æœè¯·æ±‚å‡ºç°é”™è¯¯ï¼Œé¦–å…ˆ reject è¿™ä¸ªpromise
      // ç„¶åæ–­å¼€è¿æ¥ï¼Œé¿å…å ç€è¿æ¥çš„æƒ…å†µ
      connection.on(&#39;error&#39;, err =&gt; {
        reject(err);
        connection.end();
      });
    });
  }
  /**
   * ç»„è£… HTTP Request æ–‡æœ¬å†…å®¹
   */
  toString() {
    return `${this.method} ${this.path} HTTP/1.1\r
      ${Object.keys(this.headers)
        .map(key =&gt; `${key}: ${this.headers[key]}`)
        .join(&#39;\r\n&#39;)}\r\r
      ${this.bodyText}`;
  }</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="å®ç°-RequestParser-ç±»"><a href="#å®ç°-RequestParser-ç±»" class="headerlink" title="å®ç° RequestParser ç±»"></a>å®ç° RequestParser ç±»</h1><p>ç°åœ¨æˆ‘ä»¬æ¥å…·ä½“å®ç° RequestParser ç±»çš„ä»£ç ã€‚</p>
<ul>
<li>Response å¿…é¡»åˆ†æ®µæ„é€ ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸€ä¸ª Response Parser æ¥ â€œè£…é…â€</li>
<li>ResponseParser åˆ†æ®µå¤„ç† Response Textï¼Œæˆ‘ä»¬ç”¨çŠ¶æ€æœºæ¥åˆ†ææ–‡æœ¬ç»“æ„</li>
</ul>
<pre><code class="javascript">/**
 * Response è§£æå™¨
 */
class ResponseParser {
  constructor() {
    this.state = this.waitingStatusLine;
    this.statusLine = &#39;&#39;;
    this.headers = {};
    this.headerName = &#39;&#39;;
    this.headerValue = &#39;&#39;;
    this.bodyParser = null;
  }

  receive(string) {
    for (let i = 0; i &lt; string.length; i++) {
      this.state = this.state(string.charAt(i));
    }
  }

  receiveEnd(char) {
    return receiveEnd;
  }

  /**
   * ç­‰å¾…çŠ¶æ€è¡Œå†…å®¹
   * @param {*} char æ–‡æœ¬
   */
  waitingStatusLine(char) {
    if (char === &#39;\r&#39;) return this.waitingStatusLineEnd;
    this.statusLine += char;
    return this.waitingStatusLine;
  }

  /**
   * ç­‰å¾…çŠ¶æ€è¡Œç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingStatusLineEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingHeaderName;
    return this.waitingStatusLineEnd;
  }

  /**
   * ç­‰å¾… Header å
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderName(char) {
    if (char === &#39;:&#39;) return this.waitingHeaderSpace;
    if (char === &#39;\r&#39;) return this.waitingHeaderBlockEnd;
    this.headerName += char;
    return this.waitingHeaderName;
  }

  /**
   * ç­‰å¾… Header ç©ºæ ¼
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderSpace(char) {
    if (char === &#39; &#39;) return this.waitingHeaderValue;
    return this.waitingHeaderSpace;
  }

  /**
   * ç­‰å¾… Header å€¼
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderValue(char) {
    if (char === &#39;\r&#39;) {
      this.headers[this.headerName] = this.headerValue;
      this.headerName = &#39;&#39;;
      this.headerValue = &#39;&#39;;
      return this.waitingHeaderLineEnd;
    }
    this.headerValue += char;
    return this.waitingHeaderValue;
  }

  /**
   * ç­‰å¾… Header è¡Œç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderLineEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingHeaderName;
    return this.waitingHeaderLineEnd;
  }

  /**
   * ç­‰å¾… Header å†…å®¹ç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderBlockEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingBody;
    return this.waitingHeaderBlockEnd;
  }

  /**
   * ç­‰å¾… body å†…å®¹
   * @param {*} char æ–‡æœ¬
   */
  waitingBody(char) {
    console.log(char);
    return this.waitingBody;
  }
}</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="å®ç°-Body-å†…å®¹è§£æå™¨"><a href="#å®ç°-Body-å†…å®¹è§£æå™¨" class="headerlink" title="å®ç° Body å†…å®¹è§£æå™¨"></a>å®ç° Body å†…å®¹è§£æå™¨</h1><p>æœ€åæˆ‘ä»¬æ¥å®ç° Body å†…å®¹çš„è§£æé€»è¾‘ã€‚</p>
<ul>
<li>Response çš„ body å¯èƒ½æ ¹æ® Content-Type æœ‰ä¸åŒçš„ç»“æ„ï¼Œå› æ­¤æˆ‘ä»¬ä¼šé‡‡ç”¨å­ Parser çš„ç»“æ„æ¥è§£å†³é—®é¢˜</li>
<li>ä»¥ ChunkedBodyParser ä¸ºä¾‹ï¼Œæˆ‘ä»¬åŒæ ·ç”¨çŠ¶æ€æœºæ¥å¤„ç† body çš„æ ¼å¼</li>
</ul>
<pre><code class="javascript">/**
 * Response è§£æå™¨
 */
class ResponseParser {
  constructor() {
    this.state = this.waitingStatusLine;
    this.statusLine = &#39;&#39;;
    this.headers = {};
    this.headerName = &#39;&#39;;
    this.headerValue = &#39;&#39;;
    this.bodyParser = null;
  }

  get isFinished() {
    return this.bodyParser &amp;&amp; this.bodyParser.isFinished;
  }

  get response() {
    this.statusLine.match(/HTTP\/1.1 ([0-9]+) ([\s\S]+)/);
    return {
      statusCode: RegExp.$1,
      statusText: RegExp.$2,
      headers: this.headers,
      body: this.bodyParser.content.join(&#39;&#39;),
    };
  }

  receive(string) {
    for (let i = 0; i &lt; string.length; i++) {
      this.state = this.state(string.charAt(i));
    }
  }

  receiveEnd(char) {
    return receiveEnd;
  }

  /**
   * ç­‰å¾…çŠ¶æ€è¡Œå†…å®¹
   * @param {*} char æ–‡æœ¬
   */
  waitingStatusLine(char) {
    if (char === &#39;\r&#39;) return this.waitingStatusLineEnd;
    this.statusLine += char;
    return this.waitingStatusLine;
  }

  /**
   * ç­‰å¾…çŠ¶æ€è¡Œç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingStatusLineEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingHeaderName;
    return this.waitingStatusLineEnd;
  }

  /**
   * ç­‰å¾… Header å
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderName(char) {
    if (char === &#39;:&#39;) return this.waitingHeaderSpace;
    if (char === &#39;\r&#39;) {
      if (this.headers[&#39;Transfer-Encoding&#39;] === &#39;chunked&#39;) {
        this.bodyParser = new ChunkedBodyParser();
      }
      return this.waitingHeaderBlockEnd;
    }
    this.headerName += char;
    return this.waitingHeaderName;
  }

  /**
   * ç­‰å¾… Header ç©ºæ ¼
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderSpace(char) {
    if (char === &#39; &#39;) return this.waitingHeaderValue;
    return this.waitingHeaderSpace;
  }

  /**
   * ç­‰å¾… Header å€¼
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderValue(char) {
    if (char === &#39;\r&#39;) {
      this.headers[this.headerName] = this.headerValue;
      this.headerName = &#39;&#39;;
      this.headerValue = &#39;&#39;;
      return this.waitingHeaderLineEnd;
    }
    this.headerValue += char;
    return this.waitingHeaderValue;
  }

  /**
   * ç­‰å¾… Header è¡Œç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderLineEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingHeaderName;
    return this.waitingHeaderLineEnd;
  }

  /**
   * ç­‰å¾… Header å†…å®¹ç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingHeaderBlockEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingBody;
    return this.waitingHeaderBlockEnd;
  }

  /**
   * ç­‰å¾… body å†…å®¹
   * @param {*} char æ–‡æœ¬
   */
  waitingBody(char) {
    this.bodyParser.receiveChar(char);
    return this.waitingBody;
  }
}

/**
 * Chunked Body è§£æå™¨
 */
class ChunkedBodyParser {
  constructor() {
    this.state = this.waitingLength;
    this.length = 0;
    this.content = [];
    this.isFinished = false;
  }

  receiveChar(char) {
    this.state = this.state(char);
  }

  /**
   * ç­‰å¾… Body é•¿åº¦
   * @param {*} char æ–‡æœ¬
   */
  waitingLength(char) {
    if (char === &#39;\r&#39;) {
      if (this.length === 0) this.isFinished = true;
      return this.waitingLengthLineEnd;
    } else {
      // è½¬æ¢åå…­è¿›åˆ¶é•¿åº¦
      this.length *= 16;
      this.length += parseInt(char, 16);
    }
    return this.waitingLength;
  }

  /**
   * ç­‰å¾… Body line ç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingLengthLineEnd(char) {
    if (char === &#39;\n&#39;) return this.readingTrunk;
    return this.waitingLengthLineEnd;
  }

  /**
   * è¯»å– Trunk å†…å®¹
   * @param {*} char æ–‡æœ¬
   */
  readingTrunk(char) {
    this.content.push(char);
    this.length--;
    if (this.length === 0) return this.waitingNewLine;
    return this.readingTrunk;
  }

  /**
   * ç­‰å¾…æ–°çš„ä¸€è¡Œ
   * @param {*} char æ–‡æœ¬
   */
  waitingNewLine(char) {
    if (char === &#39;\r&#39;) return this.waitingNewLineEnd;
    return this.waitingNewLine;
  }

  /**
   * ç­‰å¾…æ–°çš„ä¸€è¡Œç»“æŸ
   * @param {*} char æ–‡æœ¬
   */
  waitingNewLineEnd(char) {
    if (char === &#39;\n&#39;) return this.waitingLength;
    return this.waitingNewLineEnd;
  }
}</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><blockquote>
<p>æˆ‘æ˜¯<font color="#60AAF8"><b>ä¸‰é’»</b></font>ï¼Œä¸€ä¸ªåœ¨<font color="#60AAF8"><b>ã€ŠæŠ€æœ¯é“¶æ²³ã€‹</b></font>ä¸­ç­‰ä½ ä»¬ä¸€èµ·æ¥ç»ˆç”Ÿæ¼‚æ³Šå­¦ä¹ ã€‚</p>
<p>ç‚¹èµæ˜¯åŠ›é‡ï¼Œå…³æ³¨æ˜¯è®¤å¯ï¼Œè¯„è®ºæ˜¯å…³çˆ±ï¼ä¸‹æœŸå†è§ ğŸ‘‹ï¼</p>
</blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å°±å®ç°äº†æµè§ˆå™¨çš„ HTTP Request è¯·æ±‚ï¼ŒHTTP Response è§£æçš„è¿‡ç¨‹çš„ä»£ç ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ–‡æˆ‘ä»¬æ¥ä¸€èµ·å®ç° HTTP è§£æå¹¶ä¸”æ„å»º DOM æ ‘ï¼Œç„¶åè¿›è¡Œ CSS è®¡ç®—ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<h1 id="æ¨èä¸“æ "><a href="#æ¨èä¸“æ " class="headerlink" title="æ¨èä¸“æ "></a>æ¨èä¸“æ </h1><p>å°ä¼™ä¼´ä»¬å¯ä»¥<strong>æŸ¥çœ‹æˆ–è€…è®¢é˜…ç›¸å…³çš„ä¸“æ </strong>ï¼Œä»è€Œé›†ä¸­é˜…è¯»ç›¸å…³çŸ¥è¯†çš„æ–‡ç« å“¦ã€‚</p>
<ul>
<li><p>ğŸ“– <a href="https://blog.csdn.net/tridiamond6/category_10036942.html" target="_blank" rel="noopener">ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹</a> â€” åˆ°äº†å¦‚ä»Šï¼Œå¦‚æœæƒ³æˆä¸ºä¸€ä¸ªé«˜çº§å¼€å‘å·¥ç¨‹å¸ˆæˆ–è€…è¿›å…¥å¤§å‚ï¼Œä¸è®ºå²—ä½æ˜¯å‰ç«¯ã€åç«¯è¿˜æ˜¯ AIï¼Œç®—æ³•éƒ½æ˜¯é‡ä¸­ä¹‹é‡ã€‚ä¹Ÿæ— è®ºæˆ‘ä»¬éœ€è¦è¿›å…¥çš„å…¬å¸çš„å²—ä½æ˜¯å¦æœ€åæ˜¯åšç®—æ³•å·¥ç¨‹å¸ˆï¼Œå‰æé¢è¯•å°±éœ€è¦è€ƒç®—æ³•ã€‚</p>
</li>
<li><p>ğŸ“– <a href="https://blog.csdn.net/tridiamond6/category_9782493.html" target="_blank" rel="noopener">ã€ŠFCC å‰ç«¯é›†è®­è¥ã€‹</a> â€” æ ¹æ® FreeCodeCamp çš„å­¦ä¹ è¯¾ç¨‹ï¼Œä¸€èµ·æ·±å…¥æµ…å‡ºå­¦ä¹ å‰ç«¯ã€‚ç¨³å›ºå‰ç«¯çŸ¥è¯†ï¼Œä¸€èµ·åœ¨ FreeCodeCamp è·å¾—è¯ä¹¦</p>
</li>
<li><p>ğŸ“– <a href="https://blog.csdn.net/tridiamond6/category_9782493.html" target="_blank" rel="noopener">ã€Šå‰ç«¯æ˜Ÿçƒã€‹</a> â€” ä»¥å®æˆ˜ä¸ºçº¿ç´¢ï¼Œæ·±å…¥æµ…å‡ºå‰ç«¯å¤šç»´åº¦çš„çŸ¥è¯†ç‚¹ã€‚å†…å«æœ‰å¤šæ–¹é¢çš„å‰ç«¯çŸ¥è¯†æ–‡ç« ï¼Œå¸¦é¢†ä¸æ‡‚å‰ç«¯çš„ç«¥é‹ä¸€èµ·å­¦ä¹ å‰ç«¯ï¼Œåœ¨å‰ç«¯å¼€å‘è·¯ä¸Šç«¥é‹ä¸€èµ·ç‡ƒèµ·å¿ƒä¸­é‚£å›¢ç« ğŸ”¥</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200613135642518.png" alt=""></p>
<p><img src="https://img-blog.csdnimg.cn/20200815153142398.png" alt=""></p>
<p><img src="https://img-blog.csdnimg.cn/20200620093918128.png" alt=""></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/chengdu.mp3'></li>
                
                    
            </ul>
            
            
            
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='ec894e2b66f752e8b7fb'
        data-cs='3ccc2e92bb350688fe2c2dc2930189b62622bfb1'
        data-r='blog-comments'
        data-o='TriDiamond'
        data-a='TriDiamond'
        data-d=''
    >ç•™è¨€</div>


            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://res.cloudinary.com/tridiamond/image/upload/v1573019751/TriDiamond_logo_ui_xeublz.jpg" height=300 width=300></img>
                    <p>ä¸‰Â·é’» TriDiamond</p>
                    <span>Think like an artist, develop like an artisan</span>
                    <dl>
                        <dd><a href="https://github.com/TriDiamond" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/TriDiamond6" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://stackoverflow.com/users/7602324/tridiamond?tab=profile" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">32 <p>æ–‡ç« </p></a></li>
                    <li><a href="/categories">13 <p>åˆ†ç±»</p></a></li>
                    <li><a href="/tags">42 <p>æ ‡ç­¾</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>ç›®å½•</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#å‰æ²¿"><span class="toc-number">1.</span> <span class="toc-text">å‰æ²¿</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹"><span class="toc-number">2.</span> <span class="toc-text">æµè§ˆå™¨åŸºç¡€æ¸²æŸ“æµç¨‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²"><span class="toc-number">3.</span> <span class="toc-text">æœ‰é™çŠ¶æ€æœºå»å¤„ç†å­—ç¬¦ä¸²</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript-ä¸­å¦‚ä½•å®ç°"><span class="toc-number">3.1.</span> <span class="toc-text">JavaScript ä¸­å¦‚ä½•å®ç°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²"><span class="toc-number">3.2.</span> <span class="toc-text">ä¸ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦"><span class="toc-number">3.3.</span> <span class="toc-text">ä½¿ç”¨çŠ¶æ€æœºå¤„ç†å­—ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP-åè®®è§£æåŸºç¡€çŸ¥è¯†"><span class="toc-number">4.</span> <span class="toc-text">HTTP åè®®è§£æåŸºç¡€çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ISO-OSI-ä¸ƒå±‚ç½‘ç»œæ¨¡å‹"><span class="toc-number">4.1.</span> <span class="toc-text">ISO-OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-ä¸-IP-çš„åŸºç¡€çŸ¥è¯†"><span class="toc-number">4.1.1.</span> <span class="toc-text">TCP ä¸ IP çš„åŸºç¡€çŸ¥è¯†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP"><span class="toc-number">4.2.</span> <span class="toc-text">HTTP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP-è¯·æ±‚-â€”â€”-æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡"><span class="toc-number">5.</span> <span class="toc-text">HTTP è¯·æ±‚ â€”â€” æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#äº†è§£-HTTP-Request-åè®®"><span class="toc-number">5.1.</span> <span class="toc-text">äº†è§£ HTTP Request åè®®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®ç°-HTTP-è¯·æ±‚"><span class="toc-number">6.</span> <span class="toc-text">å®ç° HTTP è¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Request-ç±»"><span class="toc-number">6.1.</span> <span class="toc-text">Request ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¯·æ±‚æ–¹æ³•"><span class="toc-number">6.2.</span> <span class="toc-text">è¯·æ±‚æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Request-ç±»ä¸­çš„-send-å‡½æ•°ç¼–å†™"><span class="toc-number">7.</span> <span class="toc-text">Request ç±»ä¸­çš„ send å‡½æ•°ç¼–å†™</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#è®¾è®¡-ResponseParser"><span class="toc-number">7.1.</span> <span class="toc-text">è®¾è®¡ ResponseParser</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äº†è§£-HTTP-Response-åè®®"><span class="toc-number">7.2.</span> <span class="toc-text">äº†è§£ HTTP Response åè®®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°å‘é€è¯·æ±‚"><span class="toc-number">7.3.</span> <span class="toc-text">å®ç°å‘é€è¯·æ±‚</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®ç°-RequestParser-ç±»"><span class="toc-number">8.</span> <span class="toc-text">å®ç° RequestParser ç±»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®ç°-Body-å†…å®¹è§£æå™¨"><span class="toc-number">9.</span> <span class="toc-text">å®ç° Body å†…å®¹è§£æå™¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æœ€å"><span class="toc-number">10.</span> <span class="toc-text">æœ€å</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ¨èä¸“æ "><span class="toc-number">11.</span> <span class="toc-text">æ¨èä¸“æ </span></a></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            ä¸‰Â·é’» TriDiamond
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.4" target="_blank" rel="noopener">v1.4.4</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>


 
<link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css">
 
<script src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
  
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
 
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
 
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
 
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>
 
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>
   
<script src="/js/busuanzi.min.js"></script>

<script>
  $(document).ready(function () {
    if ($('span[id^="busuanzi_"]').length) {
      initialBusuanzi();
    }
  });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-149874671-1');
</script>
 

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['Think like an artist, develop like an artisan', 'è‰ºæœ¯å®¶æ€ç»´å»æ€è€ƒé—®é¢˜ï¼Œå·¥åŒ åˆ›é€ ç²¾ç¥å»å¼€å‘'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>




</html>
