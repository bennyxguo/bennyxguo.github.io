import{d as H,S as I,B as $,G as j,O as B,s as V,I as D,i as N,C as O,h as z,H as E,u as F,r as b,Q as k,K as L,b as U,U as G,x as K,V as Q,_ as R,e as c,W as S,o as e,c as i,g as s,y as v,t as a,F as W,m as X,z as C,M as T,f as o,X as y,w as q}from"./index_prod-9412c206.js";import{T as J}from"./Toc-ed72d8c4.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";import{C as Y}from"./Comment-63224ad7.js";const Z=H({name:"ObPost",components:{Sidebar:I,Toc:J,Comment:Y,SubTitle:$,Article:j,Profile:B,SvgIcon:V},setup(){const t=D(),p=N(),_=O(),h=z(),u=E(),{t:w}=F(),n=b(new k),r=b(!0),d=async()=>{r.value=!0,n.value=new k,window.scrollTo({top:0});let l=String(u.params.slug);l=l.indexOf(",")?l.replace(/[,]+/g,"/"):l,await p.fetchPost(l).then(g=>{n.value=g,t.setTitle(n.value.title),h.setHeaderImage(g.cover),r.value=!1}),_.hexoConfig.writing.highlight.enable&&console.error("[Aurora Config Error]: Please turn off [Hightlightjs] and enable [Prismjs] instead. "),_.hexoConfig.writing.prismjs.preprocess&&console.error("[Aurora Config Error]: Please set Hexo config's prismjs' [preprocess] property to false! "),await Q(),Prism.highlightAll()};L(()=>u.params,l=>{l.slug&&u.fullPath.indexOf("#")===-1&&d()});const m=l=>{l===""&&(l=window.location.href),window.location.href=l};return U(d),G(()=>{h.resetHeaderImage()}),{isMobile:K(()=>h.isMobile),handleAuthorClick:m,loading:r,post:n,t:w}}}),tt={class:"flex flex-col"},st={class:"main-grid"},et={class:"post-header"},ot={class:"post-labels"},it={key:1},nt={key:2},lt=s("em",{class:"opacity-50"},"#",-1),at={key:2},rt=s("b",{class:"opacity-50"},"#",-1),ct={key:0,class:"post-title text-white"},pt={class:"flex flex-row items-center justify-start mt-8 mb-4"},dt={key:0,class:"post-footer"},ht={class:"text-white opacity-80"},ut={class:"opacity-70"},mt={key:1,class:"post-footer"},gt={class:"flex flex-row items-center"},ft={class:"text-ob-dim mt-1"},_t={key:2,class:"post-stats"},vt={class:"pl-2 opacity-70"},yt={class:"pl-2 opacity-70"},wt={key:3,class:"post-stats"},bt={class:"pl-2"},kt={class:"pl-2"},St={class:"main-grid"},Ct=["innerHTML"],Tt={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},Pt=s("br",null,null,-1),At=s("br",null,null,-1),xt=s("br",null,null,-1),Mt={class:"flex flex-col lg:flex-row justify-start items-end my-8"},Ht={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},It={key:1,class:"w-full h-full self-stretch mt-8 lg:mt-0"},$t={key:2,id:"comments"};function jt(t,p,_,h,u,w){const n=c("ob-skeleton"),r=c("SvgIcon"),d=c("SubTitle"),m=c("Article"),l=c("Comment"),g=c("Profile"),P=c("Toc"),A=c("Sidebar"),x=S("lazy"),M=S("scroll-spy");return e(),i("div",tt,[s("div",st,[s("div",et,[s("span",ot,[t.loading?(e(),v(n,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(e(),i("b",it,[s("span",null,a(t.post.categories[0].name),1)])):(e(),i("b",nt,a(t.t("settings.default-category")),1)),s("ul",null,[t.loading?(e(),v(n,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(e(!0),i(W,{key:1},X(t.post.tags,f=>(e(),i("li",{key:f.slug},[lt,C(" "+a(f.name),1)]))),128)):(e(),i("li",at,[rt,C(" "+a(t.t("settings.default-tag")),1)]))])]),t.post.title?(e(),i("h1",ct,a(t.post.title),1)):(e(),v(n,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),s("div",pt,[t.post.author&&t.post.count_time.symbolsTime?(e(),i("div",dt,[T(s("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:p[0]||(p[0]=f=>t.handleAuthorClick(t.post.author.link))},null,512),[[x,t.post.author.avatar||""]]),s("span",ht,[s("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:p[1]||(p[1]=f=>t.handleAuthorClick(t.post.author.link))},a(t.post.author.name),1),s("span",ut,a(t.t("settings.shared-on"))+" "+a(t.t(t.post.date.month))+" "+a(t.post.date.day)+", "+a(t.post.date.year),1)])])):(e(),i("div",mt,[s("div",gt,[o(n,{class:"mr-2",height:"28px",width:"28px",circle:!0}),s("span",ft,[o(n,{height:"20px",width:"150px"})])])])),t.post.count_time.symbolsTime&&t.post.date?(e(),i("div",_t,[s("span",null,[o(r,{"icon-class":"clock-outline",stroke:"var(--text-white)"}),s("span",vt,a(t.post.count_time.symbolsTime),1)]),s("span",null,[o(r,{"icon-class":"text-outline",stroke:"var(--text-white)"}),s("span",yt,a(t.post.count_time.symbolsCount),1)])])):(e(),i("div",wt,[s("span",null,[o(r,{"icon-class":"clock"}),s("span",bt,[o(n,{width:"40px",height:"16px"})])]),s("span",null,[o(r,{"icon-class":"text"}),s("span",kt,[o(n,{width:"40px",height:"16px"})])])]))])])]),s("div",St,[s("div",null,[t.post.content?T((e(),i("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,Ct)),[[M,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(e(),i("div",Tt,[o(n,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),Pt,o(n,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),At,xt,o(n,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),s("div",Mt,[t.post.prev_post.title?(e(),i("div",Ht,[o(d,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),o(m,{data:t.post.prev_post},null,8,["data"])])):y("",!0),t.post.next_post.title?(e(),i("div",It,[o(d,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),o(m,{data:t.post.next_post},null,8,["data"])])):y("",!0)]),t.post.title&&t.post.text&&t.post.uid?(e(),i("div",$t,[o(l,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):y("",!0)]),s("div",null,[o(A,null,{default:q(()=>[o(g,{author:t.post.author.slug||""},null,8,["author"]),o(P,{toc:t.post.toc},null,8,["toc"])]),_:1})])])])}const Ot=R(Z,[["render",jt]]);export{Ot as default};
