import{P as H}from"./PostStats-4440bd78.js";import{d as M,C as D,S as L,X as V,a2 as z,O as E,Y as I,E as N,j as O,m as R,A as F,b as q,r as k,a3 as A,B as J,$ as U,k as w,a4 as X,n as Y,_ as x,g as r,s as $,o,c as n,p as e,i as S,t as l,F as G,q as K,R as B,w as j,h as i,z as P,J as Q}from"./index_prod-05c3b0ca.js";import{T as W,u as Z}from"./useLightBox-5c850815.js";import{C as tt}from"./Comment-4329df44.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const et=M({name:"ObPost",components:{Sidebar:D,Toc:W,Comment:tt,SubTitle:L,Article:V,Profile:z,SvgIcon:E,PostStats:H},setup(){const t=I(),p=N(),m=O(),g=R(),u=F(),{t:T}=q(),s=k(new A),h=k(!0),d=k(),{enabledCommentPlugin:f}=J(),{initializeLightBox:_}=Z(),v=async()=>{var b,y;h.value=!0,s.value=new A,window.scrollTo({top:0});let a=String(u.params.slug);a=a.indexOf(",")?a.replace(/[,]+/g,"/"):a,await p.fetchPost(a).then(c=>{s.value=c,t.setTitle(s.value.title),g.setHeaderImage(c.cover),h.value=!1}),m.hexoConfig.writing.highlight.enable&&console.error("[Aurora Config Error]: Please turn off [Hightlightjs] and enable [Prismjs] instead. "),m.hexoConfig.writing.prismjs.preprocess&&console.error("[Aurora Config Error]: Please set Hexo config's prismjs' [preprocess] property to false! "),await Y(),_(),(b=d.value)==null||b.getCommentCount(),(y=d.value)==null||y.getPostView(),Prism.highlightAll()};U(()=>u.params,a=>{a.slug&&u.fullPath.indexOf("#")===-1&&v()});const C=a=>{a===""&&(a=window.location.href),window.location.href=a};return{isMobile:w(()=>g.isMobile),currentPath:w(()=>u.path),pluginConfigs:w(()=>m.themeConfig.plugins),enabledComment:w(()=>s.value.comments&&f.value.plugin!==""),postStatsRef:d,SvgTypes:X,commonStore:g,fetchData:v,handleAuthorClick:C,loading:h,post:s,t:T}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}}),ot={class:"flex flex-col mt-20"},st={class:"main-grid"},nt={class:"post-header"},it={class:"post-labels"},at={key:1},lt={key:2},rt=e("em",{class:"opacity-50"},"#",-1),ct={key:2},pt=e("b",{class:"opacity-50"},"#",-1),dt={key:0,class:"post-title text-white"},ut={class:"flex flex-row items-center justify-start mt-8 mb-4"},ht={key:0,class:"post-footer"},mt={class:"text-white opacity-80"},gt={class:"opacity-70"},ft={key:1,class:"post-footer"},vt={class:"flex flex-row items-center"},bt={class:"text-ob-dim mt-1"},yt={class:"main-grid"},wt=["innerHTML"],_t={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},Ct=e("br",null,null,-1),kt=e("br",null,null,-1),St=e("br",null,null,-1),Pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols2 gap-6 mt-6"},Tt={key:0,class:"flex flex-col w-full h-full mr-0 lg:mr-4"},At={key:1,class:"flex flex-col w-full h-full"},$t={key:2,id:"comments"};function Bt(t,p,m,g,u,T){const s=r("ob-skeleton"),h=r("PostStats"),d=r("SubTitle"),f=r("Article"),_=r("Comment"),v=r("Profile"),C=r("Toc"),a=r("Sidebar"),b=$("lazy"),y=$("scroll-spy");return o(),n("div",ot,[e("div",st,[e("div",nt,[e("span",it,[t.loading?(o(),S(s,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(o(),n("b",at,[e("span",null,l(t.post.categories[0].name),1)])):(o(),n("b",lt,l(t.t("settings.default-category")),1)),e("ul",null,[t.loading?(o(),S(s,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(o(!0),n(G,{key:1},K(t.post.tags,c=>(o(),n("li",{key:c.slug},[rt,B(" "+l(c.name),1)]))),128)):(o(),n("li",ct,[pt,B(" "+l(t.t("settings.default-tag")),1)]))])]),t.post.title?(o(),n("h1",dt,l(t.post.title),1)):(o(),S(s,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),e("div",ut,[t.post.author&&t.post.count_time.symbolsTime?(o(),n("div",ht,[j(e("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:p[0]||(p[0]=c=>t.handleAuthorClick(t.post.author.link))},null,512),[[b,t.post.author.avatar||""]]),e("span",mt,[e("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:p[1]||(p[1]=c=>t.handleAuthorClick(t.post.author.link))},l(t.post.author.name),1),e("span",gt,l(t.t("settings.shared-on"))+" "+l(t.t(t.post.date.month))+" "+l(t.post.date.day)+", "+l(t.post.date.year),1)])])):(o(),n("div",ft,[e("div",vt,[i(s,{class:"mr-2",height:"28px",width:"28px",circle:!0}),e("span",bt,[i(s,{height:"20px",width:"150px"})])])])),i(h,{"post-word-count":t.post.count_time.symbolsCount,"post-time-count":t.post.count_time.symbolsTime,"post-title":t.post.title,"current-path":t.currentPath,"plugin-configs":t.pluginConfigs,comments:t.enabledComment,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs","comments"])])])]),e("div",yt,[e("div",null,[t.post.content?j((o(),n("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,wt)),[[y,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(o(),n("div",_t,[i(s,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),Ct,i(s,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),kt,St,i(s,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),e("div",Pt,[t.post.prev_post.title?(o(),n("div",Tt,[i(d,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),i(f,{data:t.post.prev_post},null,8,["data"])])):P("",!0),t.post.next_post.title?(o(),n("div",At,[i(d,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),i(f,{data:t.post.next_post},null,8,["data"])])):P("",!0)]),t.enabledComment&&t.post.title&&t.post.text&&t.post.uid?(o(),n("div",$t,[i(_,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):P("",!0)]),e("div",null,[i(a,null,{default:Q(()=>[i(v,{author:t.post.author.slug||""},null,8,["author"]),i(C,{toc:t.post.toc,comments:t.enabledComment},null,8,["toc","comments"])]),_:1})])])])}const Vt=x(et,[["render",Bt]]);export{Vt as default};
