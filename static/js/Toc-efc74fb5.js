import{d as y,r as l,_ as v,o as p,c as g,l as r,a3 as B,q as $,j as f,L as C,a6 as E,f as h,g as d,x as _,S as x,a2 as I,i as k,p as w,h as R,G as b,Y as z,w as T,Z as N}from"./index_prod-d64bafc2.js";import{u as j}from"./PostStats-4fbab743.js";const L=y({name:"ObSticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""},stickyBottom:{type:Number,default:0},endingElId:{type:String,default:""},dynamicElClass:{type:String,default:""}},setup(){let t=l(!1),e=l(""),s=l(),a=l(),c=l(!1),n=l(0),i=l(0),o=l(!1);return{active:t,position:e,width:s,height:a,isSticky:c,newTop:n,top:i,isBottom:o}},mounted(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated(){this.handleScroll()},unmounted(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky(t,e){this.active||(this.top=t,this.position=e,this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset(){this.active&&this.reset()},reset(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll(){setTimeout(()=>{const t=document.documentElement.scrollHeight,e=this.$el.getBoundingClientRect().width,s=this.$el.getBoundingClientRect().height;if(this.dynamicElClass!==""){const u=this.$el.querySelector(this.dynamicElClass);this.height=u.getBoundingClientRect().height||s}const a=window.scrollY;this.width=e||"auto";const c=this.$el.getBoundingClientRect().top,n=this.endingElId!==""?document.getElementById(this.endingElId):null,i=document.getElementById("App-Wrapper"),o=parseInt(window.getComputedStyle(i||document.documentElement).paddingBottom,10),m=n&&n instanceof HTMLElement?t-a-s-this.stickyTop-this.stickyBottom-n.getBoundingClientRect().height-o:t;if(c<this.stickyTop){this.active=!1,m<=0?(this.isBottom=!0,this.sticky(-1,"absolute")):(this.isBottom=!1,this.sticky(this.stickyTop,"fixed"));return}this.handleReset()},16)},handleResize(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}}),H=r("div",null,"sticky",-1);function D(t,e,s,a,c,n){return p(),g("div",{id:"sticky",style:f({height:t.height+"px",zIndex:t.zIndex})},[r("div",{class:$(t.className),style:f({top:t.isSticky?t.top===-1?"initial":t.top+"px":"",bottom:t.isBottom?0:"initial",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"})},[B(t.$slots,"default",{},()=>[H])],6)],4)}const q=v(L,[["render",D]]),M=y({name:"Navigator",components:{SvgIcon:C},props:{comments:Boolean},setup(){const t=E(),{jumpToEle:e}=j();return{goBack:()=>{t.back()},backToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})},jumpToComments:()=>{e("comments")}}}}),O={id:"sidebar-navigator",class:"flex flex-row bg-ob-deep-800 rounded-xl shadow-2xl justify-items-center overflow-hidden"};function V(t,e,s,a,c,n){const i=h("SvgIcon");return p(),g("ul",O,[r("li",{class:"border-r-4 border-ob-deep-900 flex justify-center py-3 w-full hover:opacity-50 hover:text-ob transition-all cursor-pointer",onClick:e[0]||(e[0]=(...o)=>t.goBack&&t.goBack(...o))},[d(i,{class:"inline-block text-3xl","icon-class":"go-back"})]),r("li",{class:"border-r-4 border-ob-deep-900 flex justify-center py-3 w-full hover:opacity-50 hover:text-ob transition-all cursor-pointer",onClick:e[1]||(e[1]=(...o)=>t.backToTop&&t.backToTop(...o))},[d(i,{class:"inline-block text-3xl","icon-class":"back-to-top"})]),t.comments?(p(),g("li",{key:0,class:"flex justify-center py-3 w-full hover:opacity-50 hover:text-ob transition-all cursor-pointer",onClick:e[2]||(e[2]=(...o)=>t.jumpToComments&&t.jumpToComments(...o)),"data-dia":"jump-to-comment"},[d(i,{class:"inline-block text-3xl","icon-class":"quote"})])):_("",!0)])}const Y=v(M,[["render",V],["__scopeId","data-v-aab412aa"]]),A=y({name:"ObTOC",components:{SubTitle:x,Sticky:q,Navigator:Y},props:{toc:String,comments:Boolean},setup(t){const e=I(t).toc;return{tocData:e,showToc:k(()=>!(e!==void 0&&e.value==="")),sideBoxStyle:k(()=>({maxHeight:`${window.innerHeight-64-64-52-74}px`,overflowY:"scroll",overflowX:"hidden"}))}}}),G={id:"sticky-sidebar"},J={class:"sidebar-box mb-4"},P=["innerHTML"];function W(t,e,s,a,c,n){const i=h("SubTitle"),o=h("Navigator"),m=h("Sticky"),u=w("scroll-spy-active"),S=w("scroll-spy-link");return p(),R(m,{stickyTop:32,endingElId:"footer",dynamicElClass:"#sticky-sidebar"},{default:b(()=>[r("div",G,[d(z,{name:"fade-slide-y",mode:"out-in"},{default:b(()=>[T(r("div",J,[d(i,{title:"titles.toc",icon:"toc"},null,8,["title"]),T(r("div",{innerHTML:t.tocData,style:f(t.sideBoxStyle)},null,12,P),[[u,{selector:".toc-item"}],[S]])],512),[[N,t.showToc]])]),_:1}),d(o,{comments:t.comments},null,8,["comments"])])]),_:1})}const F=v(A,[["render",W]]);export{F as T};
