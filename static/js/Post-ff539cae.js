import{d as H,z as D,S as V,Q as B,Z as E,K as I,U as N,A as z,h as L,k as O,y as R,u as F,r as b,$ as T,W as U,i as k,a0 as x,n as K,_ as Q,e as r,p as A,o as s,c as o,l as e,g as S,t as l,F as W,m as Z,M as $,w as M,f as i,x as C,E as q}from"./index_prod-3cf33111.js";import{T as G}from"./Toc-0defae40.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";import{C as J}from"./Comment-c9828bd3.js";import{P as X}from"./PostStats-c9cb7354.js";const Y=H({name:"ObPost",components:{Sidebar:D,Toc:G,Comment:J,SubTitle:V,Article:B,Profile:E,SvgIcon:I,PostStats:X},setup(){const t=N(),p=z(),m=L(),g=O(),d=R(),{t:P}=F(),n=b(new T),h=b(!0),c=b(),u=async()=>{var f,v;h.value=!0,n.value=new T,window.scrollTo({top:0});let a=String(d.params.slug);a=a.indexOf(",")?a.replace(/[,]+/g,"/"):a,await p.fetchPost(a).then(y=>{n.value=y,t.setTitle(n.value.title),g.setHeaderImage(y.cover),h.value=!1}),m.hexoConfig.writing.highlight.enable&&console.error("[Aurora Config Error]: Please turn off [Hightlightjs] and enable [Prismjs] instead. "),m.hexoConfig.writing.prismjs.preprocess&&console.error("[Aurora Config Error]: Please set Hexo config's prismjs' [preprocess] property to false! "),await K(),(f=c.value)==null||f.getCommentCount(),(v=c.value)==null||v.getPostView(),Prism.highlightAll()};U(()=>d.params,a=>{a.slug&&d.fullPath.indexOf("#")===-1&&u()});const w=a=>{a===""&&(a=window.location.href),window.location.href=a};return{isMobile:k(()=>g.isMobile),currentPath:k(()=>d.path),pluginConfigs:k(()=>m.themeConfig.plugins),postStatsRef:c,SvgTypes:x,commonStore:g,fetchData:u,handleAuthorClick:w,loading:h,post:n,t:P}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}}),tt={class:"flex flex-col"},et={class:"main-grid"},st={class:"post-header"},ot={class:"post-labels"},it={key:1},nt={key:2},at=e("em",{class:"opacity-50"},"#",-1),lt={key:2},rt=e("b",{class:"opacity-50"},"#",-1),pt={key:0,class:"post-title text-white"},ct={class:"flex flex-row items-center justify-start mt-8 mb-4"},dt={key:0,class:"post-footer"},ht={class:"text-white opacity-80"},ut={class:"opacity-70"},mt={key:1,class:"post-footer"},gt={class:"flex flex-row items-center"},ft={class:"text-ob-dim mt-1"},vt={class:"main-grid"},yt=["innerHTML"],_t={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},wt=e("br",null,null,-1),bt=e("br",null,null,-1),kt=e("br",null,null,-1),St={class:"flex flex-col lg:flex-row justify-start items-end my-8"},Ct={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},Pt={key:1,class:"w-full h-full self-stretch mt-8 lg:mt-0"},Tt={key:2,id:"comments"};function At(t,p,m,g,d,P){const n=r("ob-skeleton"),h=r("PostStats"),c=r("SubTitle"),u=r("Article"),w=r("Comment"),a=r("Profile"),f=r("Toc"),v=r("Sidebar"),y=A("lazy"),j=A("scroll-spy");return s(),o("div",tt,[e("div",et,[e("div",st,[e("span",ot,[t.loading?(s(),S(n,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(s(),o("b",it,[e("span",null,l(t.post.categories[0].name),1)])):(s(),o("b",nt,l(t.t("settings.default-category")),1)),e("ul",null,[t.loading?(s(),S(n,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(s(!0),o(W,{key:1},Z(t.post.tags,_=>(s(),o("li",{key:_.slug},[at,$(" "+l(_.name),1)]))),128)):(s(),o("li",lt,[rt,$(" "+l(t.t("settings.default-tag")),1)]))])]),t.post.title?(s(),o("h1",pt,l(t.post.title),1)):(s(),S(n,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),e("div",ct,[t.post.author&&t.post.count_time.symbolsTime?(s(),o("div",dt,[M(e("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:p[0]||(p[0]=_=>t.handleAuthorClick(t.post.author.link))},null,512),[[y,t.post.author.avatar||""]]),e("span",ht,[e("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:p[1]||(p[1]=_=>t.handleAuthorClick(t.post.author.link))},l(t.post.author.name),1),e("span",ut,l(t.t("settings.shared-on"))+" "+l(t.t(t.post.date.month))+" "+l(t.post.date.day)+", "+l(t.post.date.year),1)])])):(s(),o("div",mt,[e("div",gt,[i(n,{class:"mr-2",height:"28px",width:"28px",circle:!0}),e("span",ft,[i(n,{height:"20px",width:"150px"})])])])),i(h,{"post-word-count":t.post.count_time.symbolsCount,"post-time-count":t.post.count_time.symbolsTime,"post-title":t.post.title,"current-path":t.currentPath,"plugin-configs":t.pluginConfigs,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs"])])])]),e("div",vt,[e("div",null,[t.post.content?M((s(),o("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,yt)),[[j,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(s(),o("div",_t,[i(n,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),wt,i(n,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),bt,kt,i(n,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),e("div",St,[t.post.prev_post.title?(s(),o("div",Ct,[i(c,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),i(u,{data:t.post.prev_post},null,8,["data"])])):C("",!0),t.post.next_post.title?(s(),o("div",Pt,[i(c,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),i(u,{data:t.post.next_post},null,8,["data"])])):C("",!0)]),t.post.title&&t.post.text&&t.post.uid?(s(),o("div",Tt,[i(w,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):C("",!0)]),e("div",null,[i(v,null,{default:q(()=>[i(a,{author:t.post.author.slug||""},null,8,["author"]),i(f,{toc:t.post.toc},null,8,["toc"])]),_:1})])])])}const Vt=Q(Y,[["render",At]]);export{Vt as default};
