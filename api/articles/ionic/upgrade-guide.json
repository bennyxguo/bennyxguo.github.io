{"title":"IONIC 2 升级 3 教程","uid":"4e215602f6b85cde51a96fad4b3567e1","slug":"ionic/upgrade-guide","date":"2017-04-10T00:00:00.000Z","updated":"2021-04-04T16:08:24.688Z","comments":true,"path":"api/articles/ionic/upgrade-guide.json","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","content":"<h2 id=\"升级步骤\"><a href=\"#升级步骤\" class=\"headerlink\" title=\"升级步骤\"></a>升级步骤</h2><blockquote>\n<p>这一次的升级Ionic 3 换成了使用最新的Angular 4.0, 最新的TypeScript, 添加了懒加载和修复了一些组件的bug.</p>\n</blockquote>\n<ol>\n<li>首先更新<code>package.json</code>, 按照以下的代码相应替换你package.json里面的代码, 并且把你项目根目录下的<code>node_modules</code>文件夹删除掉, 然后运行<code>npm install</code> (如果你是用淘宝镜像可以运行 <code>cnpm install</code>)</li>\n</ol>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">&quot;dependencies&quot;: &#123;\n    &quot;@angular&#x2F;common&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;compiler&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;compiler-cli&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;core&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;forms&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;http&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;platform-browser&quot;: &quot;4.0.0&quot;,\n    &quot;@angular&#x2F;platform-browser-dynamic&quot;: &quot;4.0.0&quot;,\n    &quot;@ionic-native&#x2F;core&quot;: &quot;3.4.2&quot;,\n    &quot;@ionic-native&#x2F;splash-screen&quot;: &quot;3.4.2&quot;,\n    &quot;@ionic-native&#x2F;status-bar&quot;: &quot;3.4.2&quot;,\n    &quot;@ionic&#x2F;storage&quot;: &quot;2.0.1&quot;,\n    &quot;ionic-angular&quot;: &quot;3.0.1&quot;,\n    &quot;ionicons&quot;: &quot;3.0.0&quot;,\n    &quot;rxjs&quot;: &quot;5.1.1&quot;,\n    &quot;sw-toolbox&quot;: &quot;3.4.0&quot;,\n    &quot;zone.js&quot;: &quot;^0.8.4&quot;\n&#125;,\n&quot;devDependencies&quot;: &#123;\n  &quot;@ionic&#x2F;app-scripts&quot;: &quot;1.3.0&quot;,\n  &quot;typescript&quot;: &quot;~2.2.1&quot;\n&#125;</code></pre>\n\n<ol start=\"2\">\n<li>第二步你需要在<code>app/app.module.ts</code>文件里面引入<code>BrowserModule</code>和<code>HttpModule</code></li>\n</ol>\n<blockquote>\n<p>首先需要在头部引入这两个module (如果你的APP不使用HTTP可以不引入<code>HttpModule</code>)</p>\n</blockquote>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; BrowserModule &#125; from &#39;@angular&#x2F;platform-browser&#39;;\nimport &#123; HttpModule &#125; from &#39;@angular&#x2F;http&#39;;</code></pre>\n\n<blockquote>\n<p>在同一个文件里面找到<code>imports</code>并且加入<code>BrowserModule</code>和<code>HttpModule</code></p>\n</blockquote>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">imports: [\n  BrowserModule,\n  HttpModule,\n  IonicModule.forRoot(MyApp)\n],</code></pre>\n\n<ol start=\"3\">\n<li>如果你升级到 Ionic Native 3.x, 就是CLI3. 使用 Ionic Native 3.x的话, APP打包出来会更小. 因为Ionic Native的原生插件都不自带有了, 你使用一个就要安装一个. 如果你原有的Ionic 2 项目有引入原生插件, 你就要做以下操作.</li>\n</ol>\n<blockquote>\n<p>这里用<code>Camera</code>和<code>Geolocation</code>这个两个原生插件作为例子, 你其他的插件都需要使用相同的方式做修改</p>\n</blockquote>\n<blockquote>\n<p>注意您使用的所有插件都必须要在<code>app/app.module.ts</code>里面先引用了, 而且要在<code>app/app.modules.ts</code>里面的providers里面声明, 如果没有这样配置就会出现<code>No provider for XXXXX</code>这样的报错了!</p>\n</blockquote>\n<h4 id=\"Camera插件\"><a href=\"#Camera插件\" class=\"headerlink\" title=\"Camera插件\"></a>Camera插件</h4><pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&#x2F;&#x2F; 在app&#x2F;app.module.ts文件里面\nimport &#123; Camera &#125; from &#39;@ionic-native&#x2F;camera&#39;;\n\n...\n\n@NgModule(&#123;\n  ...\n\n  providers: [\n    ...\n    Camera\n    ...\n  ]\n  ...\n&#125;)\nexport class AppModule &#123; &#125;</code></pre>\n\n<h4 id=\"Geolocation插件\"><a href=\"#Geolocation插件\" class=\"headerlink\" title=\"Geolocation插件\"></a>Geolocation插件</h4><pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&#x2F;&#x2F; 在app&#x2F;app.module.ts文件里面\nimport &#123; Geolocation &#125; from &#39;@ionic-native&#x2F;geolocation&#39;;\nimport &#123; Platform &#125; from &#39;ionic-angular&#39;;\n\nimport &#123; NgZone &#125; from &#39;@angular&#x2F;core&#39;;\n\n@Component(&#123; ... &#125;)\nexport class MyComponent &#123;\n\n  constructor(private geolocation: Geolocation, private platform: Platform, private ngZone: NgZone) &#123;\n\n    platform.ready().then(() &#x3D;&gt; &#123;\n\n      &#x2F;&#x2F; get position\n      geolocation.getCurrentPosition().then(pos &#x3D;&gt; &#123;\n\n        console.log(&#96;lat: $&#123;pos.coords.latitude&#125;, lon: $&#123;pos.coords.longitude&#125;&#96;)\n\n      &#125;);\n\n\n      &#x2F;&#x2F; watch position\n      const watch &#x3D; geolocation.watchPosition().subscribe(pos &#x3D;&gt; &#123;\n\n        console.log(&#96;lat: $&#123;pos.coords.latitude&#125;, lon: $&#123;pos.coords.longitude&#125;&#96;)\n\n        &#x2F;&#x2F; Currently, observables from Ionic Native plugins\n        &#x2F;&#x2F; need to run inside of zone to trigger change detection\n        ngZone.run(() &#x3D;&gt; &#123;\n          this.position &#x3D; pos;\n        &#125;)\n\n      &#125;);\n\n      &#x2F;&#x2F; to stop watching\n      watch.unsubscribe();\n\n    &#125;);\n\n  &#125;\n\n&#125;</code></pre>\n\n<blockquote>\n<p>更详细的文档可以参考官方的修改日记 <a href=\"https://github.com/driftyco/ionic-native/blob/master/README.md\">https://github.com/driftyco/ionic-native/blob/master/README.md</a></p>\n</blockquote>\n<h2 id=\"组件Component更变\"><a href=\"#组件Component更变\" class=\"headerlink\" title=\"组件Component更变\"></a>组件<code>Component</code>更变</h2><h4 id=\"新网格\"><a href=\"#新网格\" class=\"headerlink\" title=\"新网格\"></a>新网格</h4><blockquote>\n<p>旧的网格体系已经废除, 新的网格组件请参考官方文档 <a href=\"http://blog.ionic.io/build-awesome-desktop-apps-with-ionics-new-responsive-grid/\">http://blog.ionic.io/build-awesome-desktop-apps-with-ionics-new-responsive-grid/</a></p>\n</blockquote>\n<h4 id=\"标签的color属性更变\"><a href=\"#标签的color属性更变\" class=\"headerlink\" title=\"标签的color属性更变\"></a>标签的<code>color</code>属性更变</h4><blockquote>\n<p>以下标签的<code>color</code>属性在新的版本里面会不起效果了, 现在必须要使用<code>ion-text</code>才会起效果, 详细说明请看官方文档 <a href=\"http://ionicframework.com/docs/api/components/typography/Typography/\">http://ionicframework.com/docs/api/components/typography/Typography/</a></p>\n</blockquote>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">h1[color], h2[color], h3[color], h4[color], h5[color], h6[color], a[color]:not([ion-button]):not([ion-item]):not([ion-fab]), p[color], span[color], b[color], i[color], strong[color], em[color], small[color], sub[color], sup[color]</code></pre>\n\n<h4 id=\"Slides组件更变\"><a href=\"#Slides组件更变\" class=\"headerlink\" title=\"Slides组件更变\"></a>Slides组件更变</h4><blockquote>\n<p>以下的Slides属性和方法已经正式在新版本里面移除了</p>\n</blockquote>\n<ul>\n<li>Slides的input的<code>options</code>属性已经废除, 请使用标签的属性;</li>\n<li>Slide的事件<code>ionWillChange</code>方法已经废除, 请使用<code>ionSlideWillChange</code>;</li>\n<li>Slide的事件<code>ionDidChange</code>方法已经废除, 请使用<code>ionSlideDidChange</code>;</li>\n<li>Slide的事件<code>ionDrag</code>方法已经废除, 请使用<code>ionSlideDrag</code>;</li>\n<li>Slides的<code>getSlider()</code>方法已经废除, 请使用<code>ion-slides</code>实例;</li>\n</ul>\n","feature":null,"text":"升级步骤 这一次的升级Ionic 3 换成了使用最新的Angular 4.0, 最新的TypeScript, 添加了懒加载和修复了一些组件的bug. 首先更新package.json, 按照以下的代码相应替换你package.json里面的代码, 并且把你项目根目录下的node_...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"},{"name":"Ionic 3","slug":"Ionic-3","count":3,"path":"api/tags/Ionic-3.json"},{"name":"Angular 4","slug":"Angular-4","count":4,"path":"api/tags/Angular-4.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%87%E7%BA%A7%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">升级步骤</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Camera%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">Camera插件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Geolocation%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">Geolocation插件</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%84%E4%BB%B6Component%E6%9B%B4%E5%8F%98\"><span class=\"toc-text\">组件Component更变</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%96%B0%E7%BD%91%E6%A0%BC\"><span class=\"toc-text\">新网格</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A0%87%E7%AD%BE%E7%9A%84color%E5%B1%9E%E6%80%A7%E6%9B%B4%E5%8F%98\"><span class=\"toc-text\">标签的color属性更变</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Slides%E7%BB%84%E4%BB%B6%E6%9B%B4%E5%8F%98\"><span class=\"toc-text\">Slides组件更变</span></a></li></ol></li></ol></li></ol>","author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""},"mapped":true,"prev_post":{"title":"修复 Ionic 3.0.1 在IOS点击Tabs多次出现黑屏问题方法","uid":"aa3962a24afd553a340b25c1704d59c4","slug":"ionic/ios-blackscreen-fix","date":"2017-04-11T00:00:00.000Z","updated":"2021-04-04T16:08:24.688Z","comments":true,"path":"api/articles/ionic/ios-blackscreen-fix.json","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","text":" Ionic 3.0.1 在IOS存在的一个严重的BUG，在IOS下多次重复点击TAB的时候页面会出现黑屏问题。 好消息是目前有一个暂时的修复方法。但是这个方法涉及修改Ionic核心代码，所以如果你们正在使用Ionic3发布APP，可以暂时使用以下办法修复问题。 在node_mo...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"},{"name":"Ionic 3","slug":"Ionic-3","count":3,"path":"api/tags/Ionic-3.json"},{"name":"Angular 4","slug":"Angular-4","count":4,"path":"api/tags/Angular-4.json"}],"author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""}},"next_post":{"title":"IONIC 2 - 确认密码","uid":"b0927e1c3835a3a3456ac936677ed5d9","slug":"ionic/comfirm-password-validators","date":"2017-03-19T00:00:00.000Z","updated":"2021-04-04T16:08:24.688Z","comments":true,"path":"api/articles/ionic/comfirm-password-validators.json","keywords":null,"cover":"https://res.cloudinary.com/tridiamond/image/upload/v1571186961/blog/ionic_cover_hvzkwo.png","text":"开发过程中一般在注册或者修改密码都要写一个密码确认的表格, 这篇文章就是记录怎么在Ionic2里面使用FormBuilder和Validators判断密码是否一致. 首先这篇文章是默认您已经了解怎么使用Angualr2的FormBuilder和Validator, 如果你还没了解...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"Ionic","slug":"Ionic","count":6,"path":"api/categories/Ionic.json"}],"tags":[{"name":"Ionic 2","slug":"Ionic-2","count":3,"path":"api/tags/Ionic-2.json"},{"name":"Angular 2","slug":"Angular-2","count":2,"path":"api/tags/Angular-2.json"},{"name":"Hybird App","slug":"Hybird-App","count":6,"path":"api/tags/Hybird-App.json"}],"author":{"name":"三钻","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":""}}}